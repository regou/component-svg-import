{"version":3,"file":null,"sources":["../node_modules/rxjs/util/root.js","../node_modules/rxjs/Subscriber.js","../node_modules/rxjs/symbol/rxSubscriber.js","../node_modules/rxjs/Observer.js","../node_modules/rxjs/util/toSubscriber.js","../node_modules/rxjs/symbol/observable.js","../node_modules/rxjs/Observable.js","../node_modules/rxjs/Subscription.js","../node_modules/rxjs/util/ObjectUnsubscribedError.js","../node_modules/rxjs/SubjectSubscription.js","../node_modules/rxjs/Subject.js","../node_modules/rxjs/BehaviorSubject.js","../node_modules/rxjs/util/errorObject.js","../node_modules/rxjs/util/tryCatch.js","../node_modules/rxjs/operator/map.js","../node_modules/rxjs/Observable/dom/AjaxObservable.js","../node_modules/rxjs/Observable/dom/ajax.js","../node_modules/rxjs/observable/EmptyObservable.js","../node_modules/rxjs/observable/empty.js","../node_modules/rxjs/add/observable/empty.js","../node_modules/rxjs/operator/filter.js","../node_modules/rxjs/add/operator/filter.js","../node_modules/rxjs/add/operator/map.js","../node_modules/rxjs/OuterSubscriber.js","../node_modules/rxjs/util/isArray.js","../node_modules/rxjs/util/isPromise.js","../node_modules/rxjs/symbol/iterator.js","../node_modules/rxjs/InnerSubscriber.js","../node_modules/rxjs/util/subscribeToResult.js","../node_modules/rxjs/operator/catch.js","../node_modules/rxjs/add/operator/catch.js","../node_modules/rxjs/operator/switchMap.js","../node_modules/rxjs/add/operator/switchMap.js","../node_modules/rxjs/util/Set.js","../node_modules/rxjs/operator/distinct.js","../node_modules/rxjs/add/operator/distinct.js","../src/index.js"],"sourcesContent":["\"use strict\";\n/**\n * window: browser in DOM main thread\n * self: browser in WebWorker\n * global: Node.js/other\n */\nexports.root = (typeof window == 'object' && window.window === window && window\n    || typeof self == 'object' && self.self === self && self\n    || typeof global == 'object' && global.global === global && global);\nif (!exports.root) {\n    throw new Error('RxJS could not find any global context (window, self, global)');\n}\n//# sourceMappingURL=root.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\nvar isFunction_1 = require('./util/isFunction');\nvar Subscription_1 = require('./Subscription');\nvar Observer_1 = require('./Observer');\nvar rxSubscriber_1 = require('./symbol/rxSubscriber');\n/**\n * Implements the {@link Observer} interface and extends the\n * {@link Subscription} class. While the {@link Observer} is the public API for\n * consuming the values of an {@link Observable}, all Observers get converted to\n * a Subscriber, in order to provide Subscription-like capabilities such as\n * `unsubscribe`. Subscriber is a common type in RxJS, and crucial for\n * implementing operators, but it is rarely used as a public API.\n *\n * @class Subscriber<T>\n */\nvar Subscriber = (function (_super) {\n    __extends(Subscriber, _super);\n    /**\n     * @param {Observer|function(value: T): void} [destinationOrNext] A partially\n     * defined Observer or a `next` callback function.\n     * @param {function(e: ?any): void} [error] The `error` callback of an\n     * Observer.\n     * @param {function(): void} [complete] The `complete` callback of an\n     * Observer.\n     */\n    function Subscriber(destinationOrNext, error, complete) {\n        _super.call(this);\n        this.syncErrorValue = null;\n        this.syncErrorThrown = false;\n        this.syncErrorThrowable = false;\n        this.isStopped = false;\n        switch (arguments.length) {\n            case 0:\n                this.destination = Observer_1.empty;\n                break;\n            case 1:\n                if (!destinationOrNext) {\n                    this.destination = Observer_1.empty;\n                    break;\n                }\n                if (typeof destinationOrNext === 'object') {\n                    if (destinationOrNext instanceof Subscriber) {\n                        this.destination = destinationOrNext;\n                        this.destination.add(this);\n                    }\n                    else {\n                        this.syncErrorThrowable = true;\n                        this.destination = new SafeSubscriber(this, destinationOrNext);\n                    }\n                    break;\n                }\n            default:\n                this.syncErrorThrowable = true;\n                this.destination = new SafeSubscriber(this, destinationOrNext, error, complete);\n                break;\n        }\n    }\n    Subscriber.prototype[rxSubscriber_1.$$rxSubscriber] = function () { return this; };\n    /**\n     * A static factory for a Subscriber, given a (potentially partial) definition\n     * of an Observer.\n     * @param {function(x: ?T): void} [next] The `next` callback of an Observer.\n     * @param {function(e: ?any): void} [error] The `error` callback of an\n     * Observer.\n     * @param {function(): void} [complete] The `complete` callback of an\n     * Observer.\n     * @return {Subscriber<T>} A Subscriber wrapping the (partially defined)\n     * Observer represented by the given arguments.\n     */\n    Subscriber.create = function (next, error, complete) {\n        var subscriber = new Subscriber(next, error, complete);\n        subscriber.syncErrorThrowable = false;\n        return subscriber;\n    };\n    /**\n     * The {@link Observer} callback to receive notifications of type `next` from\n     * the Observable, with a value. The Observable may call this method 0 or more\n     * times.\n     * @param {T} [value] The `next` value.\n     * @return {void}\n     */\n    Subscriber.prototype.next = function (value) {\n        if (!this.isStopped) {\n            this._next(value);\n        }\n    };\n    /**\n     * The {@link Observer} callback to receive notifications of type `error` from\n     * the Observable, with an attached {@link Error}. Notifies the Observer that\n     * the Observable has experienced an error condition.\n     * @param {any} [err] The `error` exception.\n     * @return {void}\n     */\n    Subscriber.prototype.error = function (err) {\n        if (!this.isStopped) {\n            this.isStopped = true;\n            this._error(err);\n        }\n    };\n    /**\n     * The {@link Observer} callback to receive a valueless notification of type\n     * `complete` from the Observable. Notifies the Observer that the Observable\n     * has finished sending push-based notifications.\n     * @return {void}\n     */\n    Subscriber.prototype.complete = function () {\n        if (!this.isStopped) {\n            this.isStopped = true;\n            this._complete();\n        }\n    };\n    Subscriber.prototype.unsubscribe = function () {\n        if (this.closed) {\n            return;\n        }\n        this.isStopped = true;\n        _super.prototype.unsubscribe.call(this);\n    };\n    Subscriber.prototype._next = function (value) {\n        this.destination.next(value);\n    };\n    Subscriber.prototype._error = function (err) {\n        this.destination.error(err);\n        this.unsubscribe();\n    };\n    Subscriber.prototype._complete = function () {\n        this.destination.complete();\n        this.unsubscribe();\n    };\n    return Subscriber;\n}(Subscription_1.Subscription));\nexports.Subscriber = Subscriber;\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar SafeSubscriber = (function (_super) {\n    __extends(SafeSubscriber, _super);\n    function SafeSubscriber(_parent, observerOrNext, error, complete) {\n        _super.call(this);\n        this._parent = _parent;\n        var next;\n        var context = this;\n        if (isFunction_1.isFunction(observerOrNext)) {\n            next = observerOrNext;\n        }\n        else if (observerOrNext) {\n            context = observerOrNext;\n            next = observerOrNext.next;\n            error = observerOrNext.error;\n            complete = observerOrNext.complete;\n            if (isFunction_1.isFunction(context.unsubscribe)) {\n                this.add(context.unsubscribe.bind(context));\n            }\n            context.unsubscribe = this.unsubscribe.bind(this);\n        }\n        this._context = context;\n        this._next = next;\n        this._error = error;\n        this._complete = complete;\n    }\n    SafeSubscriber.prototype.next = function (value) {\n        if (!this.isStopped && this._next) {\n            var _parent = this._parent;\n            if (!_parent.syncErrorThrowable) {\n                this.__tryOrUnsub(this._next, value);\n            }\n            else if (this.__tryOrSetError(_parent, this._next, value)) {\n                this.unsubscribe();\n            }\n        }\n    };\n    SafeSubscriber.prototype.error = function (err) {\n        if (!this.isStopped) {\n            var _parent = this._parent;\n            if (this._error) {\n                if (!_parent.syncErrorThrowable) {\n                    this.__tryOrUnsub(this._error, err);\n                    this.unsubscribe();\n                }\n                else {\n                    this.__tryOrSetError(_parent, this._error, err);\n                    this.unsubscribe();\n                }\n            }\n            else if (!_parent.syncErrorThrowable) {\n                this.unsubscribe();\n                throw err;\n            }\n            else {\n                _parent.syncErrorValue = err;\n                _parent.syncErrorThrown = true;\n                this.unsubscribe();\n            }\n        }\n    };\n    SafeSubscriber.prototype.complete = function () {\n        if (!this.isStopped) {\n            var _parent = this._parent;\n            if (this._complete) {\n                if (!_parent.syncErrorThrowable) {\n                    this.__tryOrUnsub(this._complete);\n                    this.unsubscribe();\n                }\n                else {\n                    this.__tryOrSetError(_parent, this._complete);\n                    this.unsubscribe();\n                }\n            }\n            else {\n                this.unsubscribe();\n            }\n        }\n    };\n    SafeSubscriber.prototype.__tryOrUnsub = function (fn, value) {\n        try {\n            fn.call(this._context, value);\n        }\n        catch (err) {\n            this.unsubscribe();\n            throw err;\n        }\n    };\n    SafeSubscriber.prototype.__tryOrSetError = function (parent, fn, value) {\n        try {\n            fn.call(this._context, value);\n        }\n        catch (err) {\n            parent.syncErrorValue = err;\n            parent.syncErrorThrown = true;\n            return true;\n        }\n        return false;\n    };\n    SafeSubscriber.prototype._unsubscribe = function () {\n        var _parent = this._parent;\n        this._context = null;\n        this._parent = null;\n        _parent.unsubscribe();\n    };\n    return SafeSubscriber;\n}(Subscriber));\n//# sourceMappingURL=Subscriber.js.map","\"use strict\";\nvar root_1 = require('../util/root');\nvar Symbol = root_1.root.Symbol;\nexports.$$rxSubscriber = (typeof Symbol === 'function' && typeof Symbol.for === 'function') ?\n    Symbol.for('rxSubscriber') : '@@rxSubscriber';\n//# sourceMappingURL=rxSubscriber.js.map","\"use strict\";\nexports.empty = {\n    closed: true,\n    next: function (value) { },\n    error: function (err) { throw err; },\n    complete: function () { }\n};\n//# sourceMappingURL=Observer.js.map","\"use strict\";\nvar Subscriber_1 = require('../Subscriber');\nvar rxSubscriber_1 = require('../symbol/rxSubscriber');\nvar Observer_1 = require('../Observer');\nfunction toSubscriber(nextOrObserver, error, complete) {\n    if (nextOrObserver) {\n        if (nextOrObserver instanceof Subscriber_1.Subscriber) {\n            return nextOrObserver;\n        }\n        if (nextOrObserver[rxSubscriber_1.$$rxSubscriber]) {\n            return nextOrObserver[rxSubscriber_1.$$rxSubscriber]();\n        }\n    }\n    if (!nextOrObserver && !error && !complete) {\n        return new Subscriber_1.Subscriber(Observer_1.empty);\n    }\n    return new Subscriber_1.Subscriber(nextOrObserver, error, complete);\n}\nexports.toSubscriber = toSubscriber;\n//# sourceMappingURL=toSubscriber.js.map","\"use strict\";\nvar root_1 = require('../util/root');\nfunction getSymbolObservable(context) {\n    var $$observable;\n    var Symbol = context.Symbol;\n    if (typeof Symbol === 'function') {\n        if (Symbol.observable) {\n            $$observable = Symbol.observable;\n        }\n        else {\n            $$observable = Symbol('observable');\n            Symbol.observable = $$observable;\n        }\n    }\n    else {\n        $$observable = '@@observable';\n    }\n    return $$observable;\n}\nexports.getSymbolObservable = getSymbolObservable;\nexports.$$observable = getSymbolObservable(root_1.root);\n//# sourceMappingURL=observable.js.map","\"use strict\";\nvar root_1 = require('./util/root');\nvar toSubscriber_1 = require('./util/toSubscriber');\nvar observable_1 = require('./symbol/observable');\n/**\n * A representation of any set of values over any amount of time. This the most basic building block\n * of RxJS.\n *\n * @class Observable<T>\n */\nvar Observable = (function () {\n    /**\n     * @constructor\n     * @param {Function} subscribe the function that is  called when the Observable is\n     * initially subscribed to. This function is given a Subscriber, to which new values\n     * can be `next`ed, or an `error` method can be called to raise an error, or\n     * `complete` can be called to notify of a successful completion.\n     */\n    function Observable(subscribe) {\n        this._isScalar = false;\n        if (subscribe) {\n            this._subscribe = subscribe;\n        }\n    }\n    /**\n     * Creates a new Observable, with this Observable as the source, and the passed\n     * operator defined as the new observable's operator.\n     * @method lift\n     * @param {Operator} operator the operator defining the operation to take on the observable\n     * @return {Observable} a new observable with the Operator applied\n     */\n    Observable.prototype.lift = function (operator) {\n        var observable = new Observable();\n        observable.source = this;\n        observable.operator = operator;\n        return observable;\n    };\n    Observable.prototype.subscribe = function (observerOrNext, error, complete) {\n        var operator = this.operator;\n        var sink = toSubscriber_1.toSubscriber(observerOrNext, error, complete);\n        if (operator) {\n            operator.call(sink, this);\n        }\n        else {\n            sink.add(this._subscribe(sink));\n        }\n        if (sink.syncErrorThrowable) {\n            sink.syncErrorThrowable = false;\n            if (sink.syncErrorThrown) {\n                throw sink.syncErrorValue;\n            }\n        }\n        return sink;\n    };\n    /**\n     * @method forEach\n     * @param {Function} next a handler for each value emitted by the observable\n     * @param {PromiseConstructor} [PromiseCtor] a constructor function used to instantiate the Promise\n     * @return {Promise} a promise that either resolves on observable completion or\n     *  rejects with the handled error\n     */\n    Observable.prototype.forEach = function (next, PromiseCtor) {\n        var _this = this;\n        if (!PromiseCtor) {\n            if (root_1.root.Rx && root_1.root.Rx.config && root_1.root.Rx.config.Promise) {\n                PromiseCtor = root_1.root.Rx.config.Promise;\n            }\n            else if (root_1.root.Promise) {\n                PromiseCtor = root_1.root.Promise;\n            }\n        }\n        if (!PromiseCtor) {\n            throw new Error('no Promise impl found');\n        }\n        return new PromiseCtor(function (resolve, reject) {\n            var subscription = _this.subscribe(function (value) {\n                if (subscription) {\n                    // if there is a subscription, then we can surmise\n                    // the next handling is asynchronous. Any errors thrown\n                    // need to be rejected explicitly and unsubscribe must be\n                    // called manually\n                    try {\n                        next(value);\n                    }\n                    catch (err) {\n                        reject(err);\n                        subscription.unsubscribe();\n                    }\n                }\n                else {\n                    // if there is NO subscription, then we're getting a nexted\n                    // value synchronously during subscription. We can just call it.\n                    // If it errors, Observable's `subscribe` will ensure the\n                    // unsubscription logic is called, then synchronously rethrow the error.\n                    // After that, Promise will trap the error and send it\n                    // down the rejection path.\n                    next(value);\n                }\n            }, reject, resolve);\n        });\n    };\n    Observable.prototype._subscribe = function (subscriber) {\n        return this.source.subscribe(subscriber);\n    };\n    /**\n     * An interop point defined by the es7-observable spec https://github.com/zenparsing/es-observable\n     * @method Symbol.observable\n     * @return {Observable} this instance of the observable\n     */\n    Observable.prototype[observable_1.$$observable] = function () {\n        return this;\n    };\n    // HACK: Since TypeScript inherits static properties too, we have to\n    // fight against TypeScript here so Subject can have a different static create signature\n    /**\n     * Creates a new cold Observable by calling the Observable constructor\n     * @static true\n     * @owner Observable\n     * @method create\n     * @param {Function} subscribe? the subscriber function to be passed to the Observable constructor\n     * @return {Observable} a new cold observable\n     */\n    Observable.create = function (subscribe) {\n        return new Observable(subscribe);\n    };\n    return Observable;\n}());\nexports.Observable = Observable;\n//# sourceMappingURL=Observable.js.map","\"use strict\";\nvar isArray_1 = require('./util/isArray');\nvar isObject_1 = require('./util/isObject');\nvar isFunction_1 = require('./util/isFunction');\nvar tryCatch_1 = require('./util/tryCatch');\nvar errorObject_1 = require('./util/errorObject');\nvar UnsubscriptionError_1 = require('./util/UnsubscriptionError');\n/**\n * Represents a disposable resource, such as the execution of an Observable. A\n * Subscription has one important method, `unsubscribe`, that takes no argument\n * and just disposes the resource held by the subscription.\n *\n * Additionally, subscriptions may be grouped together through the `add()`\n * method, which will attach a child Subscription to the current Subscription.\n * When a Subscription is unsubscribed, all its children (and its grandchildren)\n * will be unsubscribed as well.\n *\n * @class Subscription\n */\nvar Subscription = (function () {\n    /**\n     * @param {function(): void} [unsubscribe] A function describing how to\n     * perform the disposal of resources when the `unsubscribe` method is called.\n     */\n    function Subscription(unsubscribe) {\n        /**\n         * A flag to indicate whether this Subscription has already been unsubscribed.\n         * @type {boolean}\n         */\n        this.closed = false;\n        if (unsubscribe) {\n            this._unsubscribe = unsubscribe;\n        }\n    }\n    /**\n     * Disposes the resources held by the subscription. May, for instance, cancel\n     * an ongoing Observable execution or cancel any other type of work that\n     * started when the Subscription was created.\n     * @return {void}\n     */\n    Subscription.prototype.unsubscribe = function () {\n        var hasErrors = false;\n        var errors;\n        if (this.closed) {\n            return;\n        }\n        this.closed = true;\n        var _a = this, _unsubscribe = _a._unsubscribe, _subscriptions = _a._subscriptions;\n        this._subscriptions = null;\n        if (isFunction_1.isFunction(_unsubscribe)) {\n            var trial = tryCatch_1.tryCatch(_unsubscribe).call(this);\n            if (trial === errorObject_1.errorObject) {\n                hasErrors = true;\n                (errors = errors || []).push(errorObject_1.errorObject.e);\n            }\n        }\n        if (isArray_1.isArray(_subscriptions)) {\n            var index = -1;\n            var len = _subscriptions.length;\n            while (++index < len) {\n                var sub = _subscriptions[index];\n                if (isObject_1.isObject(sub)) {\n                    var trial = tryCatch_1.tryCatch(sub.unsubscribe).call(sub);\n                    if (trial === errorObject_1.errorObject) {\n                        hasErrors = true;\n                        errors = errors || [];\n                        var err = errorObject_1.errorObject.e;\n                        if (err instanceof UnsubscriptionError_1.UnsubscriptionError) {\n                            errors = errors.concat(err.errors);\n                        }\n                        else {\n                            errors.push(err);\n                        }\n                    }\n                }\n            }\n        }\n        if (hasErrors) {\n            throw new UnsubscriptionError_1.UnsubscriptionError(errors);\n        }\n    };\n    /**\n     * Adds a tear down to be called during the unsubscribe() of this\n     * Subscription.\n     *\n     * If the tear down being added is a subscription that is already\n     * unsubscribed, is the same reference `add` is being called on, or is\n     * `Subscription.EMPTY`, it will not be added.\n     *\n     * If this subscription is already in an `closed` state, the passed\n     * tear down logic will be executed immediately.\n     *\n     * @param {TeardownLogic} teardown The additional logic to execute on\n     * teardown.\n     * @return {Subscription} Returns the Subscription used or created to be\n     * added to the inner subscriptions list. This Subscription can be used with\n     * `remove()` to remove the passed teardown logic from the inner subscriptions\n     * list.\n     */\n    Subscription.prototype.add = function (teardown) {\n        if (!teardown || (teardown === Subscription.EMPTY)) {\n            return Subscription.EMPTY;\n        }\n        if (teardown === this) {\n            return this;\n        }\n        var sub = teardown;\n        switch (typeof teardown) {\n            case 'function':\n                sub = new Subscription(teardown);\n            case 'object':\n                if (sub.closed || typeof sub.unsubscribe !== 'function') {\n                    break;\n                }\n                else if (this.closed) {\n                    sub.unsubscribe();\n                }\n                else {\n                    (this._subscriptions || (this._subscriptions = [])).push(sub);\n                }\n                break;\n            default:\n                throw new Error('unrecognized teardown ' + teardown + ' added to Subscription.');\n        }\n        return sub;\n    };\n    /**\n     * Removes a Subscription from the internal list of subscriptions that will\n     * unsubscribe during the unsubscribe process of this Subscription.\n     * @param {Subscription} subscription The subscription to remove.\n     * @return {void}\n     */\n    Subscription.prototype.remove = function (subscription) {\n        // HACK: This might be redundant because of the logic in `add()`\n        if (subscription == null || (subscription === this) || (subscription === Subscription.EMPTY)) {\n            return;\n        }\n        var subscriptions = this._subscriptions;\n        if (subscriptions) {\n            var subscriptionIndex = subscriptions.indexOf(subscription);\n            if (subscriptionIndex !== -1) {\n                subscriptions.splice(subscriptionIndex, 1);\n            }\n        }\n    };\n    Subscription.EMPTY = (function (empty) {\n        empty.closed = true;\n        return empty;\n    }(new Subscription()));\n    return Subscription;\n}());\nexports.Subscription = Subscription;\n//# sourceMappingURL=Subscription.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\n/**\n * An error thrown when an action is invalid because the object has been\n * unsubscribed.\n *\n * @see {@link Subject}\n * @see {@link BehaviorSubject}\n *\n * @class ObjectUnsubscribedError\n */\nvar ObjectUnsubscribedError = (function (_super) {\n    __extends(ObjectUnsubscribedError, _super);\n    function ObjectUnsubscribedError() {\n        var err = _super.call(this, 'object unsubscribed');\n        this.name = err.name = 'ObjectUnsubscribedError';\n        this.stack = err.stack;\n        this.message = err.message;\n    }\n    return ObjectUnsubscribedError;\n}(Error));\nexports.ObjectUnsubscribedError = ObjectUnsubscribedError;\n//# sourceMappingURL=ObjectUnsubscribedError.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\nvar Subscription_1 = require('./Subscription');\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar SubjectSubscription = (function (_super) {\n    __extends(SubjectSubscription, _super);\n    function SubjectSubscription(subject, subscriber) {\n        _super.call(this);\n        this.subject = subject;\n        this.subscriber = subscriber;\n        this.closed = false;\n    }\n    SubjectSubscription.prototype.unsubscribe = function () {\n        if (this.closed) {\n            return;\n        }\n        this.closed = true;\n        var subject = this.subject;\n        var observers = subject.observers;\n        this.subject = null;\n        if (!observers || observers.length === 0 || subject.isStopped || subject.closed) {\n            return;\n        }\n        var subscriberIndex = observers.indexOf(this.subscriber);\n        if (subscriberIndex !== -1) {\n            observers.splice(subscriberIndex, 1);\n        }\n    };\n    return SubjectSubscription;\n}(Subscription_1.Subscription));\nexports.SubjectSubscription = SubjectSubscription;\n//# sourceMappingURL=SubjectSubscription.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\nvar Observable_1 = require('./Observable');\nvar Subscriber_1 = require('./Subscriber');\nvar Subscription_1 = require('./Subscription');\nvar ObjectUnsubscribedError_1 = require('./util/ObjectUnsubscribedError');\nvar SubjectSubscription_1 = require('./SubjectSubscription');\nvar rxSubscriber_1 = require('./symbol/rxSubscriber');\n/**\n * @class SubjectSubscriber<T>\n */\nvar SubjectSubscriber = (function (_super) {\n    __extends(SubjectSubscriber, _super);\n    function SubjectSubscriber(destination) {\n        _super.call(this, destination);\n        this.destination = destination;\n    }\n    return SubjectSubscriber;\n}(Subscriber_1.Subscriber));\nexports.SubjectSubscriber = SubjectSubscriber;\n/**\n * @class Subject<T>\n */\nvar Subject = (function (_super) {\n    __extends(Subject, _super);\n    function Subject() {\n        _super.call(this);\n        this.observers = [];\n        this.closed = false;\n        this.isStopped = false;\n        this.hasError = false;\n        this.thrownError = null;\n    }\n    Subject.prototype[rxSubscriber_1.$$rxSubscriber] = function () {\n        return new SubjectSubscriber(this);\n    };\n    Subject.prototype.lift = function (operator) {\n        var subject = new AnonymousSubject(this, this);\n        subject.operator = operator;\n        return subject;\n    };\n    Subject.prototype.next = function (value) {\n        if (this.closed) {\n            throw new ObjectUnsubscribedError_1.ObjectUnsubscribedError();\n        }\n        if (!this.isStopped) {\n            var observers = this.observers;\n            var len = observers.length;\n            var copy = observers.slice();\n            for (var i = 0; i < len; i++) {\n                copy[i].next(value);\n            }\n        }\n    };\n    Subject.prototype.error = function (err) {\n        if (this.closed) {\n            throw new ObjectUnsubscribedError_1.ObjectUnsubscribedError();\n        }\n        this.hasError = true;\n        this.thrownError = err;\n        this.isStopped = true;\n        var observers = this.observers;\n        var len = observers.length;\n        var copy = observers.slice();\n        for (var i = 0; i < len; i++) {\n            copy[i].error(err);\n        }\n        this.observers.length = 0;\n    };\n    Subject.prototype.complete = function () {\n        if (this.closed) {\n            throw new ObjectUnsubscribedError_1.ObjectUnsubscribedError();\n        }\n        this.isStopped = true;\n        var observers = this.observers;\n        var len = observers.length;\n        var copy = observers.slice();\n        for (var i = 0; i < len; i++) {\n            copy[i].complete();\n        }\n        this.observers.length = 0;\n    };\n    Subject.prototype.unsubscribe = function () {\n        this.isStopped = true;\n        this.closed = true;\n        this.observers = null;\n    };\n    Subject.prototype._subscribe = function (subscriber) {\n        if (this.closed) {\n            throw new ObjectUnsubscribedError_1.ObjectUnsubscribedError();\n        }\n        else if (this.hasError) {\n            subscriber.error(this.thrownError);\n            return Subscription_1.Subscription.EMPTY;\n        }\n        else if (this.isStopped) {\n            subscriber.complete();\n            return Subscription_1.Subscription.EMPTY;\n        }\n        else {\n            this.observers.push(subscriber);\n            return new SubjectSubscription_1.SubjectSubscription(this, subscriber);\n        }\n    };\n    Subject.prototype.asObservable = function () {\n        var observable = new Observable_1.Observable();\n        observable.source = this;\n        return observable;\n    };\n    Subject.create = function (destination, source) {\n        return new AnonymousSubject(destination, source);\n    };\n    return Subject;\n}(Observable_1.Observable));\nexports.Subject = Subject;\n/**\n * @class AnonymousSubject<T>\n */\nvar AnonymousSubject = (function (_super) {\n    __extends(AnonymousSubject, _super);\n    function AnonymousSubject(destination, source) {\n        _super.call(this);\n        this.destination = destination;\n        this.source = source;\n    }\n    AnonymousSubject.prototype.next = function (value) {\n        var destination = this.destination;\n        if (destination && destination.next) {\n            destination.next(value);\n        }\n    };\n    AnonymousSubject.prototype.error = function (err) {\n        var destination = this.destination;\n        if (destination && destination.error) {\n            this.destination.error(err);\n        }\n    };\n    AnonymousSubject.prototype.complete = function () {\n        var destination = this.destination;\n        if (destination && destination.complete) {\n            this.destination.complete();\n        }\n    };\n    AnonymousSubject.prototype._subscribe = function (subscriber) {\n        var source = this.source;\n        if (source) {\n            return this.source.subscribe(subscriber);\n        }\n        else {\n            return Subscription_1.Subscription.EMPTY;\n        }\n    };\n    return AnonymousSubject;\n}(Subject));\nexports.AnonymousSubject = AnonymousSubject;\n//# sourceMappingURL=Subject.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\nvar Subject_1 = require('./Subject');\nvar ObjectUnsubscribedError_1 = require('./util/ObjectUnsubscribedError');\n/**\n * @class BehaviorSubject<T>\n */\nvar BehaviorSubject = (function (_super) {\n    __extends(BehaviorSubject, _super);\n    function BehaviorSubject(_value) {\n        _super.call(this);\n        this._value = _value;\n    }\n    Object.defineProperty(BehaviorSubject.prototype, \"value\", {\n        get: function () {\n            return this.getValue();\n        },\n        enumerable: true,\n        configurable: true\n    });\n    BehaviorSubject.prototype._subscribe = function (subscriber) {\n        var subscription = _super.prototype._subscribe.call(this, subscriber);\n        if (subscription && !subscription.closed) {\n            subscriber.next(this._value);\n        }\n        return subscription;\n    };\n    BehaviorSubject.prototype.getValue = function () {\n        if (this.hasError) {\n            throw this.thrownError;\n        }\n        else if (this.closed) {\n            throw new ObjectUnsubscribedError_1.ObjectUnsubscribedError();\n        }\n        else {\n            return this._value;\n        }\n    };\n    BehaviorSubject.prototype.next = function (value) {\n        _super.prototype.next.call(this, this._value = value);\n    };\n    return BehaviorSubject;\n}(Subject_1.Subject));\nexports.BehaviorSubject = BehaviorSubject;\n//# sourceMappingURL=BehaviorSubject.js.map","\"use strict\";\n// typeof any so that it we don't have to cast when comparing a result to the error object\nexports.errorObject = { e: {} };\n//# sourceMappingURL=errorObject.js.map","\"use strict\";\nvar errorObject_1 = require('./errorObject');\nvar tryCatchTarget;\nfunction tryCatcher() {\n    try {\n        return tryCatchTarget.apply(this, arguments);\n    }\n    catch (e) {\n        errorObject_1.errorObject.e = e;\n        return errorObject_1.errorObject;\n    }\n}\nfunction tryCatch(fn) {\n    tryCatchTarget = fn;\n    return tryCatcher;\n}\nexports.tryCatch = tryCatch;\n;\n//# sourceMappingURL=tryCatch.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\nvar Subscriber_1 = require('../Subscriber');\n/**\n * Applies a given `project` function to each value emitted by the source\n * Observable, and emits the resulting values as an Observable.\n *\n * <span class=\"informal\">Like [Array.prototype.map()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map),\n * it passes each source value through a transformation function to get\n * corresponding output values.</span>\n *\n * <img src=\"./img/map.png\" width=\"100%\">\n *\n * Similar to the well known `Array.prototype.map` function, this operator\n * applies a projection to each value and emits that projection in the output\n * Observable.\n *\n * @example <caption>Map every every click to the clientX position of that click</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var positions = clicks.map(ev => ev.clientX);\n * positions.subscribe(x => console.log(x));\n *\n * @see {@link mapTo}\n * @see {@link pluck}\n *\n * @param {function(value: T, index: number): R} project The function to apply\n * to each `value` emitted by the source Observable. The `index` parameter is\n * the number `i` for the i-th emission that has happened since the\n * subscription, starting from the number `0`.\n * @param {any} [thisArg] An optional argument to define what `this` is in the\n * `project` function.\n * @return {Observable<R>} An Observable that emits the values from the source\n * Observable transformed by the given `project` function.\n * @method map\n * @owner Observable\n */\nfunction map(project, thisArg) {\n    if (typeof project !== 'function') {\n        throw new TypeError('argument is not a function. Are you looking for `mapTo()`?');\n    }\n    return this.lift(new MapOperator(project, thisArg));\n}\nexports.map = map;\nvar MapOperator = (function () {\n    function MapOperator(project, thisArg) {\n        this.project = project;\n        this.thisArg = thisArg;\n    }\n    MapOperator.prototype.call = function (subscriber, source) {\n        return source._subscribe(new MapSubscriber(subscriber, this.project, this.thisArg));\n    };\n    return MapOperator;\n}());\nexports.MapOperator = MapOperator;\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar MapSubscriber = (function (_super) {\n    __extends(MapSubscriber, _super);\n    function MapSubscriber(destination, project, thisArg) {\n        _super.call(this, destination);\n        this.project = project;\n        this.count = 0;\n        this.thisArg = thisArg || this;\n    }\n    // NOTE: This looks unoptimized, but it's actually purposefully NOT\n    // using try/catch optimizations.\n    MapSubscriber.prototype._next = function (value) {\n        var result;\n        try {\n            result = this.project.call(this.thisArg, value, this.count++);\n        }\n        catch (err) {\n            this.destination.error(err);\n            return;\n        }\n        this.destination.next(result);\n    };\n    return MapSubscriber;\n}(Subscriber_1.Subscriber));\n//# sourceMappingURL=map.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\nvar root_1 = require('../../util/root');\nvar tryCatch_1 = require('../../util/tryCatch');\nvar errorObject_1 = require('../../util/errorObject');\nvar Observable_1 = require('../../Observable');\nvar Subscriber_1 = require('../../Subscriber');\nvar map_1 = require('../../operator/map');\nfunction getCORSRequest() {\n    if (root_1.root.XMLHttpRequest) {\n        var xhr = new root_1.root.XMLHttpRequest();\n        if ('withCredentials' in xhr) {\n            xhr.withCredentials = !!this.withCredentials;\n        }\n        return xhr;\n    }\n    else if (!!root_1.root.XDomainRequest) {\n        return new root_1.root.XDomainRequest();\n    }\n    else {\n        throw new Error('CORS is not supported by your browser');\n    }\n}\nfunction getXMLHttpRequest() {\n    if (root_1.root.XMLHttpRequest) {\n        return new root_1.root.XMLHttpRequest();\n    }\n    else {\n        var progId = void 0;\n        try {\n            var progIds = ['Msxml2.XMLHTTP', 'Microsoft.XMLHTTP', 'Msxml2.XMLHTTP.4.0'];\n            for (var i = 0; i < 3; i++) {\n                try {\n                    progId = progIds[i];\n                    if (new root_1.root.ActiveXObject(progId)) {\n                        break;\n                    }\n                }\n                catch (e) {\n                }\n            }\n            return new root_1.root.ActiveXObject(progId);\n        }\n        catch (e) {\n            throw new Error('XMLHttpRequest is not supported by your browser');\n        }\n    }\n}\nfunction ajaxGet(url, headers) {\n    if (headers === void 0) { headers = null; }\n    return new AjaxObservable({ method: 'GET', url: url, headers: headers });\n}\nexports.ajaxGet = ajaxGet;\n;\nfunction ajaxPost(url, body, headers) {\n    return new AjaxObservable({ method: 'POST', url: url, body: body, headers: headers });\n}\nexports.ajaxPost = ajaxPost;\n;\nfunction ajaxDelete(url, headers) {\n    return new AjaxObservable({ method: 'DELETE', url: url, headers: headers });\n}\nexports.ajaxDelete = ajaxDelete;\n;\nfunction ajaxPut(url, body, headers) {\n    return new AjaxObservable({ method: 'PUT', url: url, body: body, headers: headers });\n}\nexports.ajaxPut = ajaxPut;\n;\nfunction ajaxGetJSON(url, headers) {\n    return new AjaxObservable({ method: 'GET', url: url, responseType: 'json', headers: headers })\n        .lift(new map_1.MapOperator(function (x, index) { return x.response; }, null));\n}\nexports.ajaxGetJSON = ajaxGetJSON;\n;\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @extends {Ignored}\n * @hide true\n */\nvar AjaxObservable = (function (_super) {\n    __extends(AjaxObservable, _super);\n    function AjaxObservable(urlOrRequest) {\n        _super.call(this);\n        var request = {\n            async: true,\n            createXHR: function () {\n                return this.crossDomain ? getCORSRequest.call(this) : getXMLHttpRequest();\n            },\n            crossDomain: false,\n            withCredentials: false,\n            headers: {},\n            method: 'GET',\n            responseType: 'json',\n            timeout: 0\n        };\n        if (typeof urlOrRequest === 'string') {\n            request.url = urlOrRequest;\n        }\n        else {\n            for (var prop in urlOrRequest) {\n                if (urlOrRequest.hasOwnProperty(prop)) {\n                    request[prop] = urlOrRequest[prop];\n                }\n            }\n        }\n        this.request = request;\n    }\n    AjaxObservable.prototype._subscribe = function (subscriber) {\n        return new AjaxSubscriber(subscriber, this.request);\n    };\n    /**\n     * Creates an observable for an Ajax request with either a request object with\n     * url, headers, etc or a string for a URL.\n     *\n     * @example\n     * source = Rx.Observable.ajax('/products');\n     * source = Rx.Observable.ajax({ url: 'products', method: 'GET' });\n     *\n     * @param {string|Object} request Can be one of the following:\n     *   A string of the URL to make the Ajax call.\n     *   An object with the following properties\n     *   - url: URL of the request\n     *   - body: The body of the request\n     *   - method: Method of the request, such as GET, POST, PUT, PATCH, DELETE\n     *   - async: Whether the request is async\n     *   - headers: Optional headers\n     *   - crossDomain: true if a cross domain request, else false\n     *   - createXHR: a function to override if you need to use an alternate\n     *   XMLHttpRequest implementation.\n     *   - resultSelector: a function to use to alter the output value type of\n     *   the Observable. Gets {@link AjaxResponse} as an argument.\n     * @return {Observable} An observable sequence containing the XMLHttpRequest.\n     * @static true\n     * @name ajax\n     * @owner Observable\n    */\n    AjaxObservable.create = (function () {\n        var create = function (urlOrRequest) {\n            return new AjaxObservable(urlOrRequest);\n        };\n        create.get = ajaxGet;\n        create.post = ajaxPost;\n        create.delete = ajaxDelete;\n        create.put = ajaxPut;\n        create.getJSON = ajaxGetJSON;\n        return create;\n    })();\n    return AjaxObservable;\n}(Observable_1.Observable));\nexports.AjaxObservable = AjaxObservable;\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar AjaxSubscriber = (function (_super) {\n    __extends(AjaxSubscriber, _super);\n    function AjaxSubscriber(destination, request) {\n        _super.call(this, destination);\n        this.request = request;\n        this.done = false;\n        var headers = request.headers = request.headers || {};\n        // force CORS if requested\n        if (!request.crossDomain && !headers['X-Requested-With']) {\n            headers['X-Requested-With'] = 'XMLHttpRequest';\n        }\n        // ensure content type is set\n        if (!('Content-Type' in headers) && !(root_1.root.FormData && request.body instanceof root_1.root.FormData) && typeof request.body !== 'undefined') {\n            headers['Content-Type'] = 'application/x-www-form-urlencoded; charset=UTF-8';\n        }\n        // properly serialize body\n        request.body = this.serializeBody(request.body, request.headers['Content-Type']);\n        this.send();\n    }\n    AjaxSubscriber.prototype.next = function (e) {\n        this.done = true;\n        var _a = this, xhr = _a.xhr, request = _a.request, destination = _a.destination;\n        var response = new AjaxResponse(e, xhr, request);\n        destination.next(response);\n    };\n    AjaxSubscriber.prototype.send = function () {\n        var _a = this, request = _a.request, _b = _a.request, user = _b.user, method = _b.method, url = _b.url, async = _b.async, password = _b.password, headers = _b.headers, body = _b.body;\n        var createXHR = request.createXHR;\n        var xhr = tryCatch_1.tryCatch(createXHR).call(request);\n        if (xhr === errorObject_1.errorObject) {\n            this.error(errorObject_1.errorObject.e);\n        }\n        else {\n            this.xhr = xhr;\n            // open XHR first\n            var result = void 0;\n            if (user) {\n                result = tryCatch_1.tryCatch(xhr.open).call(xhr, method, url, async, user, password);\n            }\n            else {\n                result = tryCatch_1.tryCatch(xhr.open).call(xhr, method, url, async);\n            }\n            if (result === errorObject_1.errorObject) {\n                this.error(errorObject_1.errorObject.e);\n                return null;\n            }\n            // timeout and responseType can be set once the XHR is open\n            xhr.timeout = request.timeout;\n            xhr.responseType = request.responseType;\n            // set headers\n            this.setHeaders(xhr, headers);\n            // now set up the events\n            this.setupEvents(xhr, request);\n            // finally send the request\n            if (body) {\n                xhr.send(body);\n            }\n            else {\n                xhr.send();\n            }\n        }\n        return xhr;\n    };\n    AjaxSubscriber.prototype.serializeBody = function (body, contentType) {\n        if (!body || typeof body === 'string') {\n            return body;\n        }\n        else if (root_1.root.FormData && body instanceof root_1.root.FormData) {\n            return body;\n        }\n        if (contentType) {\n            var splitIndex = contentType.indexOf(';');\n            if (splitIndex !== -1) {\n                contentType = contentType.substring(0, splitIndex);\n            }\n        }\n        switch (contentType) {\n            case 'application/x-www-form-urlencoded':\n                return Object.keys(body).map(function (key) { return (encodeURI(key) + \"=\" + encodeURI(body[key])); }).join('&');\n            case 'application/json':\n                return JSON.stringify(body);\n            default:\n                return body;\n        }\n    };\n    AjaxSubscriber.prototype.setHeaders = function (xhr, headers) {\n        for (var key in headers) {\n            if (headers.hasOwnProperty(key)) {\n                xhr.setRequestHeader(key, headers[key]);\n            }\n        }\n    };\n    AjaxSubscriber.prototype.setupEvents = function (xhr, request) {\n        var progressSubscriber = request.progressSubscriber;\n        function xhrTimeout(e) {\n            var _a = xhrTimeout, subscriber = _a.subscriber, progressSubscriber = _a.progressSubscriber, request = _a.request;\n            if (progressSubscriber) {\n                progressSubscriber.error(e);\n            }\n            subscriber.error(new AjaxTimeoutError(this, request)); //TODO: Make betterer.\n        }\n        ;\n        xhr.ontimeout = xhrTimeout;\n        xhrTimeout.request = request;\n        xhrTimeout.subscriber = this;\n        xhrTimeout.progressSubscriber = progressSubscriber;\n        if (xhr.upload && 'withCredentials' in xhr && root_1.root.XDomainRequest) {\n            if (progressSubscriber) {\n                var xhrProgress_1;\n                xhrProgress_1 = function (e) {\n                    var progressSubscriber = xhrProgress_1.progressSubscriber;\n                    progressSubscriber.next(e);\n                };\n                xhr.onprogress = xhrProgress_1;\n                xhrProgress_1.progressSubscriber = progressSubscriber;\n            }\n            var xhrError_1;\n            xhrError_1 = function (e) {\n                var _a = xhrError_1, progressSubscriber = _a.progressSubscriber, subscriber = _a.subscriber, request = _a.request;\n                if (progressSubscriber) {\n                    progressSubscriber.error(e);\n                }\n                subscriber.error(new AjaxError('ajax error', this, request));\n            };\n            xhr.onerror = xhrError_1;\n            xhrError_1.request = request;\n            xhrError_1.subscriber = this;\n            xhrError_1.progressSubscriber = progressSubscriber;\n        }\n        function xhrReadyStateChange(e) {\n            var _a = xhrReadyStateChange, subscriber = _a.subscriber, progressSubscriber = _a.progressSubscriber, request = _a.request;\n            if (this.readyState === 4) {\n                // normalize IE9 bug (http://bugs.jquery.com/ticket/1450)\n                var status_1 = this.status === 1223 ? 204 : this.status;\n                var response = (this.responseType === 'text' ? (this.response || this.responseText) : this.response);\n                // fix status code when it is 0 (0 status is undocumented).\n                // Occurs when accessing file resources or on Android 4.1 stock browser\n                // while retrieving files from application cache.\n                if (status_1 === 0) {\n                    status_1 = response ? 200 : 0;\n                }\n                if (200 <= status_1 && status_1 < 300) {\n                    if (progressSubscriber) {\n                        progressSubscriber.complete();\n                    }\n                    subscriber.next(e);\n                    subscriber.complete();\n                }\n                else {\n                    if (progressSubscriber) {\n                        progressSubscriber.error(e);\n                    }\n                    subscriber.error(new AjaxError('ajax error ' + status_1, this, request));\n                }\n            }\n        }\n        ;\n        xhr.onreadystatechange = xhrReadyStateChange;\n        xhrReadyStateChange.subscriber = this;\n        xhrReadyStateChange.progressSubscriber = progressSubscriber;\n        xhrReadyStateChange.request = request;\n    };\n    AjaxSubscriber.prototype.unsubscribe = function () {\n        var _a = this, done = _a.done, xhr = _a.xhr;\n        if (!done && xhr && xhr.readyState !== 4 && typeof xhr.abort === 'function') {\n            xhr.abort();\n        }\n        _super.prototype.unsubscribe.call(this);\n    };\n    return AjaxSubscriber;\n}(Subscriber_1.Subscriber));\nexports.AjaxSubscriber = AjaxSubscriber;\n/**\n * A normalized AJAX response.\n *\n * @see {@link ajax}\n *\n * @class AjaxResponse\n */\nvar AjaxResponse = (function () {\n    function AjaxResponse(originalEvent, xhr, request) {\n        this.originalEvent = originalEvent;\n        this.xhr = xhr;\n        this.request = request;\n        this.status = xhr.status;\n        this.responseType = xhr.responseType || request.responseType;\n        switch (this.responseType) {\n            case 'json':\n                if ('response' in xhr) {\n                    //IE does not support json as responseType, parse it internally\n                    this.response = xhr.responseType ? xhr.response : JSON.parse(xhr.response || xhr.responseText || 'null');\n                }\n                else {\n                    this.response = JSON.parse(xhr.responseText || 'null');\n                }\n                break;\n            case 'xml':\n                this.response = xhr.responseXML;\n                break;\n            case 'text':\n            default:\n                this.response = ('response' in xhr) ? xhr.response : xhr.responseText;\n                break;\n        }\n    }\n    return AjaxResponse;\n}());\nexports.AjaxResponse = AjaxResponse;\n/**\n * A normalized AJAX error.\n *\n * @see {@link ajax}\n *\n * @class AjaxError\n */\nvar AjaxError = (function (_super) {\n    __extends(AjaxError, _super);\n    function AjaxError(message, xhr, request) {\n        _super.call(this, message);\n        this.message = message;\n        this.xhr = xhr;\n        this.request = request;\n        this.status = xhr.status;\n    }\n    return AjaxError;\n}(Error));\nexports.AjaxError = AjaxError;\n/**\n * @see {@link ajax}\n *\n * @class AjaxTimeoutError\n */\nvar AjaxTimeoutError = (function (_super) {\n    __extends(AjaxTimeoutError, _super);\n    function AjaxTimeoutError(xhr, request) {\n        _super.call(this, 'ajax timeout', xhr, request);\n    }\n    return AjaxTimeoutError;\n}(AjaxError));\nexports.AjaxTimeoutError = AjaxTimeoutError;\n//# sourceMappingURL=AjaxObservable.js.map","\"use strict\";\nvar AjaxObservable_1 = require('./AjaxObservable');\nexports.ajax = AjaxObservable_1.AjaxObservable.create;\n//# sourceMappingURL=ajax.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\nvar Observable_1 = require('../Observable');\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @extends {Ignored}\n * @hide true\n */\nvar EmptyObservable = (function (_super) {\n    __extends(EmptyObservable, _super);\n    function EmptyObservable(scheduler) {\n        _super.call(this);\n        this.scheduler = scheduler;\n    }\n    /**\n     * Creates an Observable that emits no items to the Observer and immediately\n     * emits a complete notification.\n     *\n     * <span class=\"informal\">Just emits 'complete', and nothing else.\n     * </span>\n     *\n     * <img src=\"./img/empty.png\" width=\"100%\">\n     *\n     * This static operator is useful for creating a simple Observable that only\n     * emits the complete notification. It can be used for composing with other\n     * Observables, such as in a {@link mergeMap}.\n     *\n     * @example <caption>Emit the number 7, then complete.</caption>\n     * var result = Rx.Observable.empty().startWith(7);\n     * result.subscribe(x => console.log(x));\n     *\n     * @example <caption>Map and flatten only odd numbers to the sequence 'a', 'b', 'c'</caption>\n     * var interval = Rx.Observable.interval(1000);\n     * var result = interval.mergeMap(x =>\n     *   x % 2 === 1 ? Rx.Observable.of('a', 'b', 'c') : Rx.Observable.empty()\n     * );\n     * result.subscribe(x => console.log(x));\n     *\n     * @see {@link create}\n     * @see {@link never}\n     * @see {@link of}\n     * @see {@link throw}\n     *\n     * @param {Scheduler} [scheduler] A {@link Scheduler} to use for scheduling\n     * the emission of the complete notification.\n     * @return {Observable} An \"empty\" Observable: emits only the complete\n     * notification.\n     * @static true\n     * @name empty\n     * @owner Observable\n     */\n    EmptyObservable.create = function (scheduler) {\n        return new EmptyObservable(scheduler);\n    };\n    EmptyObservable.dispatch = function (arg) {\n        var subscriber = arg.subscriber;\n        subscriber.complete();\n    };\n    EmptyObservable.prototype._subscribe = function (subscriber) {\n        var scheduler = this.scheduler;\n        if (scheduler) {\n            return scheduler.schedule(EmptyObservable.dispatch, 0, { subscriber: subscriber });\n        }\n        else {\n            subscriber.complete();\n        }\n    };\n    return EmptyObservable;\n}(Observable_1.Observable));\nexports.EmptyObservable = EmptyObservable;\n//# sourceMappingURL=EmptyObservable.js.map","\"use strict\";\nvar EmptyObservable_1 = require('./EmptyObservable');\nexports.empty = EmptyObservable_1.EmptyObservable.create;\n//# sourceMappingURL=empty.js.map","\"use strict\";\nvar Observable_1 = require('../../Observable');\nvar empty_1 = require('../../observable/empty');\nObservable_1.Observable.empty = empty_1.empty;\n//# sourceMappingURL=empty.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\nvar Subscriber_1 = require('../Subscriber');\n/* tslint:disable:max-line-length */\n/**\n * Filter items emitted by the source Observable by only emitting those that\n * satisfy a specified predicate.\n *\n * <span class=\"informal\">Like\n * [Array.prototype.filter()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/filter),\n * it only emits a value from the source if it passes a criterion function.</span>\n *\n * <img src=\"./img/filter.png\" width=\"100%\">\n *\n * Similar to the well-known `Array.prototype.filter` method, this operator\n * takes values from the source Observable, passes them through a `predicate`\n * function and only emits those values that yielded `true`.\n *\n * @example <caption>Emit only click events whose target was a DIV element</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var clicksOnDivs = clicks.filter(ev => ev.target.tagName === 'DIV');\n * clicksOnDivs.subscribe(x => console.log(x));\n *\n * @see {@link distinct}\n * @see {@link distinctKey}\n * @see {@link distinctUntilChanged}\n * @see {@link distinctUntilKeyChanged}\n * @see {@link ignoreElements}\n * @see {@link partition}\n * @see {@link skip}\n *\n * @param {function(value: T, index: number): boolean} predicate A function that\n * evaluates each value emitted by the source Observable. If it returns `true`,\n * the value is emitted, if `false` the value is not passed to the output\n * Observable. The `index` parameter is the number `i` for the i-th source\n * emission that has happened since the subscription, starting from the number\n * `0`.\n * @param {any} [thisArg] An optional argument to determine the value of `this`\n * in the `predicate` function.\n * @return {Observable} An Observable of values from the source that were\n * allowed by the `predicate` function.\n * @method filter\n * @owner Observable\n */\nfunction filter(predicate, thisArg) {\n    return this.lift(new FilterOperator(predicate, thisArg));\n}\nexports.filter = filter;\nvar FilterOperator = (function () {\n    function FilterOperator(predicate, thisArg) {\n        this.predicate = predicate;\n        this.thisArg = thisArg;\n    }\n    FilterOperator.prototype.call = function (subscriber, source) {\n        return source._subscribe(new FilterSubscriber(subscriber, this.predicate, this.thisArg));\n    };\n    return FilterOperator;\n}());\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar FilterSubscriber = (function (_super) {\n    __extends(FilterSubscriber, _super);\n    function FilterSubscriber(destination, predicate, thisArg) {\n        _super.call(this, destination);\n        this.predicate = predicate;\n        this.thisArg = thisArg;\n        this.count = 0;\n        this.predicate = predicate;\n    }\n    // the try catch block below is left specifically for\n    // optimization and perf reasons. a tryCatcher is not necessary here.\n    FilterSubscriber.prototype._next = function (value) {\n        var result;\n        try {\n            result = this.predicate.call(this.thisArg, value, this.count++);\n        }\n        catch (err) {\n            this.destination.error(err);\n            return;\n        }\n        if (result) {\n            this.destination.next(value);\n        }\n    };\n    return FilterSubscriber;\n}(Subscriber_1.Subscriber));\n//# sourceMappingURL=filter.js.map","\"use strict\";\nvar Observable_1 = require('../../Observable');\nvar filter_1 = require('../../operator/filter');\nObservable_1.Observable.prototype.filter = filter_1.filter;\n//# sourceMappingURL=filter.js.map","\"use strict\";\nvar Observable_1 = require('../../Observable');\nvar map_1 = require('../../operator/map');\nObservable_1.Observable.prototype.map = map_1.map;\n//# sourceMappingURL=map.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\nvar Subscriber_1 = require('./Subscriber');\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar OuterSubscriber = (function (_super) {\n    __extends(OuterSubscriber, _super);\n    function OuterSubscriber() {\n        _super.apply(this, arguments);\n    }\n    OuterSubscriber.prototype.notifyNext = function (outerValue, innerValue, outerIndex, innerIndex, innerSub) {\n        this.destination.next(innerValue);\n    };\n    OuterSubscriber.prototype.notifyError = function (error, innerSub) {\n        this.destination.error(error);\n    };\n    OuterSubscriber.prototype.notifyComplete = function (innerSub) {\n        this.destination.complete();\n    };\n    return OuterSubscriber;\n}(Subscriber_1.Subscriber));\nexports.OuterSubscriber = OuterSubscriber;\n//# sourceMappingURL=OuterSubscriber.js.map","\"use strict\";\nexports.isArray = Array.isArray || (function (x) { return x && typeof x.length === 'number'; });\n//# sourceMappingURL=isArray.js.map","\"use strict\";\nfunction isPromise(value) {\n    return value && typeof value.subscribe !== 'function' && typeof value.then === 'function';\n}\nexports.isPromise = isPromise;\n//# sourceMappingURL=isPromise.js.map","\"use strict\";\nvar root_1 = require('../util/root');\nfunction symbolIteratorPonyfill(root) {\n    var Symbol = root.Symbol;\n    if (typeof Symbol === 'function') {\n        if (!Symbol.iterator) {\n            Symbol.iterator = Symbol('iterator polyfill');\n        }\n        return Symbol.iterator;\n    }\n    else {\n        // [for Mozilla Gecko 27-35:](https://mzl.la/2ewE1zC)\n        var Set_1 = root.Set;\n        if (Set_1 && typeof new Set_1()['@@iterator'] === 'function') {\n            return '@@iterator';\n        }\n        var Map_1 = root.Map;\n        // required for compatability with es6-shim\n        if (Map_1) {\n            var keys = Object.getOwnPropertyNames(Map_1.prototype);\n            for (var i = 0; i < keys.length; ++i) {\n                var key = keys[i];\n                // according to spec, Map.prototype[@@iterator] and Map.orototype.entries must be equal.\n                if (key !== 'entries' && key !== 'size' && Map_1.prototype[key] === Map_1.prototype['entries']) {\n                    return key;\n                }\n            }\n        }\n        return '@@iterator';\n    }\n}\nexports.symbolIteratorPonyfill = symbolIteratorPonyfill;\nexports.$$iterator = symbolIteratorPonyfill(root_1.root);\n//# sourceMappingURL=iterator.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\nvar Subscriber_1 = require('./Subscriber');\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar InnerSubscriber = (function (_super) {\n    __extends(InnerSubscriber, _super);\n    function InnerSubscriber(parent, outerValue, outerIndex) {\n        _super.call(this);\n        this.parent = parent;\n        this.outerValue = outerValue;\n        this.outerIndex = outerIndex;\n        this.index = 0;\n    }\n    InnerSubscriber.prototype._next = function (value) {\n        this.parent.notifyNext(this.outerValue, value, this.outerIndex, this.index++, this);\n    };\n    InnerSubscriber.prototype._error = function (error) {\n        this.parent.notifyError(error, this);\n        this.unsubscribe();\n    };\n    InnerSubscriber.prototype._complete = function () {\n        this.parent.notifyComplete(this);\n        this.unsubscribe();\n    };\n    return InnerSubscriber;\n}(Subscriber_1.Subscriber));\nexports.InnerSubscriber = InnerSubscriber;\n//# sourceMappingURL=InnerSubscriber.js.map","\"use strict\";\nvar root_1 = require('./root');\nvar isArray_1 = require('./isArray');\nvar isPromise_1 = require('./isPromise');\nvar Observable_1 = require('../Observable');\nvar iterator_1 = require('../symbol/iterator');\nvar InnerSubscriber_1 = require('../InnerSubscriber');\nvar observable_1 = require('../symbol/observable');\nfunction subscribeToResult(outerSubscriber, result, outerValue, outerIndex) {\n    var destination = new InnerSubscriber_1.InnerSubscriber(outerSubscriber, outerValue, outerIndex);\n    if (destination.closed) {\n        return null;\n    }\n    if (result instanceof Observable_1.Observable) {\n        if (result._isScalar) {\n            destination.next(result.value);\n            destination.complete();\n            return null;\n        }\n        else {\n            return result.subscribe(destination);\n        }\n    }\n    if (isArray_1.isArray(result)) {\n        for (var i = 0, len = result.length; i < len && !destination.closed; i++) {\n            destination.next(result[i]);\n        }\n        if (!destination.closed) {\n            destination.complete();\n        }\n    }\n    else if (isPromise_1.isPromise(result)) {\n        result.then(function (value) {\n            if (!destination.closed) {\n                destination.next(value);\n                destination.complete();\n            }\n        }, function (err) { return destination.error(err); })\n            .then(null, function (err) {\n            // Escaping the Promise trap: globally throw unhandled errors\n            root_1.root.setTimeout(function () { throw err; });\n        });\n        return destination;\n    }\n    else if (typeof result[iterator_1.$$iterator] === 'function') {\n        var iterator = result[iterator_1.$$iterator]();\n        do {\n            var item = iterator.next();\n            if (item.done) {\n                destination.complete();\n                break;\n            }\n            destination.next(item.value);\n            if (destination.closed) {\n                break;\n            }\n        } while (true);\n    }\n    else if (typeof result[observable_1.$$observable] === 'function') {\n        var obs = result[observable_1.$$observable]();\n        if (typeof obs.subscribe !== 'function') {\n            destination.error(new Error('invalid observable'));\n        }\n        else {\n            return obs.subscribe(new InnerSubscriber_1.InnerSubscriber(outerSubscriber, outerValue, outerIndex));\n        }\n    }\n    else {\n        destination.error(new TypeError('unknown type returned'));\n    }\n    return null;\n}\nexports.subscribeToResult = subscribeToResult;\n//# sourceMappingURL=subscribeToResult.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\nvar OuterSubscriber_1 = require('../OuterSubscriber');\nvar subscribeToResult_1 = require('../util/subscribeToResult');\n/**\n * Catches errors on the observable to be handled by returning a new observable or throwing an error.\n * @param {function} selector a function that takes as arguments `err`, which is the error, and `caught`, which\n *  is the source observable, in case you'd like to \"retry\" that observable by returning it again. Whatever observable\n *  is returned by the `selector` will be used to continue the observable chain.\n * @return {Observable} an observable that originates from either the source or the observable returned by the\n *  catch `selector` function.\n * @method catch\n * @name catch\n * @owner Observable\n */\nfunction _catch(selector) {\n    var operator = new CatchOperator(selector);\n    var caught = this.lift(operator);\n    return (operator.caught = caught);\n}\nexports._catch = _catch;\nvar CatchOperator = (function () {\n    function CatchOperator(selector) {\n        this.selector = selector;\n    }\n    CatchOperator.prototype.call = function (subscriber, source) {\n        return source._subscribe(new CatchSubscriber(subscriber, this.selector, this.caught));\n    };\n    return CatchOperator;\n}());\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar CatchSubscriber = (function (_super) {\n    __extends(CatchSubscriber, _super);\n    function CatchSubscriber(destination, selector, caught) {\n        _super.call(this, destination);\n        this.selector = selector;\n        this.caught = caught;\n    }\n    // NOTE: overriding `error` instead of `_error` because we don't want\n    // to have this flag this subscriber as `isStopped`.\n    CatchSubscriber.prototype.error = function (err) {\n        if (!this.isStopped) {\n            var result = void 0;\n            try {\n                result = this.selector(err, this.caught);\n            }\n            catch (err) {\n                this.destination.error(err);\n                return;\n            }\n            this.unsubscribe();\n            this.destination.remove(this);\n            subscribeToResult_1.subscribeToResult(this, result);\n        }\n    };\n    return CatchSubscriber;\n}(OuterSubscriber_1.OuterSubscriber));\n//# sourceMappingURL=catch.js.map","\"use strict\";\nvar Observable_1 = require('../../Observable');\nvar catch_1 = require('../../operator/catch');\nObservable_1.Observable.prototype.catch = catch_1._catch;\nObservable_1.Observable.prototype._catch = catch_1._catch;\n//# sourceMappingURL=catch.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\nvar OuterSubscriber_1 = require('../OuterSubscriber');\nvar subscribeToResult_1 = require('../util/subscribeToResult');\n/* tslint:disable:max-line-length */\n/**\n * Projects each source value to an Observable which is merged in the output\n * Observable, emitting values only from the most recently projected Observable.\n *\n * <span class=\"informal\">Maps each value to an Observable, then flattens all of\n * these inner Observables using {@link switch}.</span>\n *\n * <img src=\"./img/switchMap.png\" width=\"100%\">\n *\n * Returns an Observable that emits items based on applying a function that you\n * supply to each item emitted by the source Observable, where that function\n * returns an (so-called \"inner\") Observable. Each time it observes one of these\n * inner Observables, the output Observable begins emitting the items emitted by\n * that inner Observable. When a new inner Observable is emitted, `switchMap`\n * stops emitting items from the earlier-emitted inner Observable and begins\n * emitting items from the new one. It continues to behave like this for\n * subsequent inner Observables.\n *\n * @example <caption>Rerun an interval Observable on every click event</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var result = clicks.switchMap((ev) => Rx.Observable.interval(1000));\n * result.subscribe(x => console.log(x));\n *\n * @see {@link concatMap}\n * @see {@link exhaustMap}\n * @see {@link mergeMap}\n * @see {@link switch}\n * @see {@link switchMapTo}\n *\n * @param {function(value: T, ?index: number): Observable} project A function\n * that, when applied to an item emitted by the source Observable, returns an\n * Observable.\n * @param {function(outerValue: T, innerValue: I, outerIndex: number, innerIndex: number): any} [resultSelector]\n * A function to produce the value on the output Observable based on the values\n * and the indices of the source (outer) emission and the inner Observable\n * emission. The arguments passed to this function are:\n * - `outerValue`: the value that came from the source\n * - `innerValue`: the value that came from the projected Observable\n * - `outerIndex`: the \"index\" of the value that came from the source\n * - `innerIndex`: the \"index\" of the value from the projected Observable\n * @return {Observable} An Observable that emits the result of applying the\n * projection function (and the optional `resultSelector`) to each item emitted\n * by the source Observable and taking only the values from the most recently\n * projected inner Observable.\n * @method switchMap\n * @owner Observable\n */\nfunction switchMap(project, resultSelector) {\n    return this.lift(new SwitchMapOperator(project, resultSelector));\n}\nexports.switchMap = switchMap;\nvar SwitchMapOperator = (function () {\n    function SwitchMapOperator(project, resultSelector) {\n        this.project = project;\n        this.resultSelector = resultSelector;\n    }\n    SwitchMapOperator.prototype.call = function (subscriber, source) {\n        return source._subscribe(new SwitchMapSubscriber(subscriber, this.project, this.resultSelector));\n    };\n    return SwitchMapOperator;\n}());\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar SwitchMapSubscriber = (function (_super) {\n    __extends(SwitchMapSubscriber, _super);\n    function SwitchMapSubscriber(destination, project, resultSelector) {\n        _super.call(this, destination);\n        this.project = project;\n        this.resultSelector = resultSelector;\n        this.index = 0;\n    }\n    SwitchMapSubscriber.prototype._next = function (value) {\n        var result;\n        var index = this.index++;\n        try {\n            result = this.project(value, index);\n        }\n        catch (error) {\n            this.destination.error(error);\n            return;\n        }\n        this._innerSub(result, value, index);\n    };\n    SwitchMapSubscriber.prototype._innerSub = function (result, value, index) {\n        var innerSubscription = this.innerSubscription;\n        if (innerSubscription) {\n            innerSubscription.unsubscribe();\n        }\n        this.add(this.innerSubscription = subscribeToResult_1.subscribeToResult(this, result, value, index));\n    };\n    SwitchMapSubscriber.prototype._complete = function () {\n        var innerSubscription = this.innerSubscription;\n        if (!innerSubscription || innerSubscription.closed) {\n            _super.prototype._complete.call(this);\n        }\n    };\n    SwitchMapSubscriber.prototype._unsubscribe = function () {\n        this.innerSubscription = null;\n    };\n    SwitchMapSubscriber.prototype.notifyComplete = function (innerSub) {\n        this.remove(innerSub);\n        this.innerSubscription = null;\n        if (this.isStopped) {\n            _super.prototype._complete.call(this);\n        }\n    };\n    SwitchMapSubscriber.prototype.notifyNext = function (outerValue, innerValue, outerIndex, innerIndex, innerSub) {\n        if (this.resultSelector) {\n            this._tryNotifyNext(outerValue, innerValue, outerIndex, innerIndex);\n        }\n        else {\n            this.destination.next(innerValue);\n        }\n    };\n    SwitchMapSubscriber.prototype._tryNotifyNext = function (outerValue, innerValue, outerIndex, innerIndex) {\n        var result;\n        try {\n            result = this.resultSelector(outerValue, innerValue, outerIndex, innerIndex);\n        }\n        catch (err) {\n            this.destination.error(err);\n            return;\n        }\n        this.destination.next(result);\n    };\n    return SwitchMapSubscriber;\n}(OuterSubscriber_1.OuterSubscriber));\n//# sourceMappingURL=switchMap.js.map","\"use strict\";\nvar Observable_1 = require('../../Observable');\nvar switchMap_1 = require('../../operator/switchMap');\nObservable_1.Observable.prototype.switchMap = switchMap_1.switchMap;\n//# sourceMappingURL=switchMap.js.map","\"use strict\";\nvar root_1 = require('./root');\nfunction minimalSetImpl() {\n    // THIS IS NOT a full impl of Set, this is just the minimum\n    // bits of functionality we need for this library.\n    return (function () {\n        function MinimalSet() {\n            this._values = [];\n        }\n        MinimalSet.prototype.add = function (value) {\n            if (!this.has(value)) {\n                this._values.push(value);\n            }\n        };\n        MinimalSet.prototype.has = function (value) {\n            return this._values.indexOf(value) !== -1;\n        };\n        Object.defineProperty(MinimalSet.prototype, \"size\", {\n            get: function () {\n                return this._values.length;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        MinimalSet.prototype.clear = function () {\n            this._values.length = 0;\n        };\n        return MinimalSet;\n    }());\n}\nexports.minimalSetImpl = minimalSetImpl;\nexports.Set = root_1.root.Set || minimalSetImpl();\n//# sourceMappingURL=Set.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\nvar OuterSubscriber_1 = require('../OuterSubscriber');\nvar subscribeToResult_1 = require('../util/subscribeToResult');\nvar Set_1 = require('../util/Set');\n/**\n * Returns an Observable that emits all items emitted by the source Observable that are distinct by comparison from previous items.\n * If a keySelector function is provided, then it will project each value from the source observable into a new value that it will\n * check for equality with previously projected values. If a keySelector function is not provided, it will use each value from the\n * source observable directly with an equality check against previous values.\n * In JavaScript runtimes that support `Set`, this operator will use a `Set` to improve performance of the distinct value checking.\n * In other runtimes, this operator will use a minimal implementation of `Set` that relies on an `Array` and `indexOf` under the\n * hood, so performance will degrade as more values are checked for distinction. Even in newer browsers, a long-running `distinct`\n * use might result in memory leaks. To help alleviate this in some scenarios, an optional `flushes` parameter is also provided so\n * that the internal `Set` can be \"flushed\", basically clearing it of values.\n * @param {function} [keySelector] optional function to select which value you want to check as distinct.\n * @param {Observable} [flushes] optional Observable for flushing the internal HashSet of the operator.\n * @return {Observable} an Observable that emits items from the source Observable with distinct values.\n * @method distinct\n * @owner Observable\n */\nfunction distinct(keySelector, flushes) {\n    return this.lift(new DistinctOperator(keySelector, flushes));\n}\nexports.distinct = distinct;\nvar DistinctOperator = (function () {\n    function DistinctOperator(keySelector, flushes) {\n        this.keySelector = keySelector;\n        this.flushes = flushes;\n    }\n    DistinctOperator.prototype.call = function (subscriber, source) {\n        return source._subscribe(new DistinctSubscriber(subscriber, this.keySelector, this.flushes));\n    };\n    return DistinctOperator;\n}());\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar DistinctSubscriber = (function (_super) {\n    __extends(DistinctSubscriber, _super);\n    function DistinctSubscriber(destination, keySelector, flushes) {\n        _super.call(this, destination);\n        this.keySelector = keySelector;\n        this.values = new Set_1.Set();\n        if (flushes) {\n            this.add(subscribeToResult_1.subscribeToResult(this, flushes));\n        }\n    }\n    DistinctSubscriber.prototype.notifyNext = function (outerValue, innerValue, outerIndex, innerIndex, innerSub) {\n        this.values.clear();\n    };\n    DistinctSubscriber.prototype.notifyError = function (error, innerSub) {\n        this._error(error);\n    };\n    DistinctSubscriber.prototype._next = function (value) {\n        if (this.keySelector) {\n            this._useKeySelector(value);\n        }\n        else {\n            this._finalizeNext(value, value);\n        }\n    };\n    DistinctSubscriber.prototype._useKeySelector = function (value) {\n        var key;\n        var destination = this.destination;\n        try {\n            key = this.keySelector(value);\n        }\n        catch (err) {\n            destination.error(err);\n            return;\n        }\n        this._finalizeNext(key, value);\n    };\n    DistinctSubscriber.prototype._finalizeNext = function (key, value) {\n        var values = this.values;\n        if (!values.has(key)) {\n            values.add(key);\n            this.destination.next(value);\n        }\n    };\n    return DistinctSubscriber;\n}(OuterSubscriber_1.OuterSubscriber));\nexports.DistinctSubscriber = DistinctSubscriber;\n//# sourceMappingURL=distinct.js.map","\"use strict\";\nvar Observable_1 = require('../../Observable');\nvar distinct_1 = require('../../operator/distinct');\nObservable_1.Observable.prototype.distinct = distinct_1.distinct;\n//# sourceMappingURL=distinct.js.map","import 'skatejs-web-components';\n\nimport {Component, prop, h} from 'skatejs';\nconst React = { createElement: h };\n\nimport { BehaviorSubject } from 'rxjs/BehaviorSubject';\nimport { Observable } from 'rxjs/Observable';\nimport { ajax } from 'rxjs/Observable/dom/ajax';\nimport 'rxjs/add/observable/empty';\n\nimport 'rxjs/add/operator/filter';\nimport 'rxjs/add/operator/map';\nimport 'rxjs/add/operator/catch';\nimport 'rxjs/add/operator/switchMap';\nimport 'rxjs/add/operator/distinct';\n\n\ncustomElements.define('svg-import', class extends Component {\n\tstatic get props () {\n\t\treturn {\n\t\t\t// By declaring the property an attribute, we can now pass an initial value\n\t\t\t// for the count as part of the HTML.\n\t\t\tsrc: prop.string({ attribute: true }),\n\t\t\t'inner-style': prop.string({ attribute: true }),\n\t\t};\n\t}\n\n\tconstructor(){\n\t\tsuper();\n\t\tthis.src$ = new BehaviorSubject(this.src)\n\t\t\t.filter(val => val && typeof val === 'string')\n\t\t\t.distinct( (src) => src + this['inner-style'])\n\t\t\t.switchMap(src => this.fetchXml(src))\n\t\t\t.filter(xml => !!xml);\n\t}\n\n\n\tfetchXml(src){\n\n\t\treturn ajax({url:src,cache:true,crossDomain:true,responseType:'text'})\n\t\t\t.map(function (response) {\n\t\t\t\treturn jQuery.parseXML(response.response)\n\t\t\t})\n\t\t\t.catch((err)=>{\n\t\t\t\tconsole.error(err);\n\t\t\t\treturn Observable.empty();\n\t\t\t});\n\t}\n\n\tgetWraper(){\n\t\treturn jQuery(this.shadowRoot).find('.svg-import-wrap').get(0);\n\t}\n\n\tupdateXml(xml){\n\t\tlet comp = this;\n\t\tif(!xml){return}\n\t\tconst $ = jQuery;\n\n\n\t\tvar $svg = $(xml).find('svg');\n\t\tvar svg = $svg.get(0);\n\n\t\tsvg.removeAttribute('xmlns:a');\n\t\tif(comp.width && comp.height){\n\t\t\t// svg.hasAttribute('viewBox') ? svg.setAttribute('viewBox', '0 0 ' + comp.height + ' ' + comp.width) : '';\n\t\t\tsvg.setAttribute('width','100%');\n\t\t\tsvg.setAttribute('height','100%');\n\t\t}\n\n\t\tvar wraper = comp.getWraper();\n\n\t\tif(wraper){\n\t\t\twraper.innerHTML = '';\n\t\t\twraper.appendChild(svg);\n\t\t}\n\n\t}\n\tconnectedCallback () {\n\t\t// Ensure we call the parent.\n\t\tsuper.connectedCallback();\n\t\t//this.updateXml();\n\t\tif(!jQuery){\n\t\t\tthrow new TypeError('svg-import require jQuery to work!');\n\t\t}\n\n\t\tthis.srcSubscription = this.src$\n\t\t\t.subscribe(\n\t\t\t\t(src)=>this.updateXml(src),\n\t\t\t\t(err)=>console.error(err));\n\n\t}\n\tattributeChangedCallback (name, oldValue, newValue) {\n\t\tsuper.attributeChangedCallback(name, oldValue, newValue);\n\t\tif(name === 'src'){\n\t\t\tthis.src$.next(newValue);\n\t\t}\n\t}\n\tdisconnectedCallback () {\n\t\t// Ensure we callback the parent.\n\t\tsuper.disconnectedCallback();\n\t\tif(this.srcSubscription){\n\t\t\tthis.srcSubscription.unsubscribe();\n\t\t}\n\t}\n\trenderCallback () {\n\t\t// By separating the strings (and not using template literals or string\n\t\t// concatenation) it ensures the strings are diffed indepenedently. If\n\t\t// you select \"Count\" with your mouse, it will not deselect whenr endered.\n\t\tvar comp = this;\n\n\t\tconst defBoxStyle = `\n\t\t\t:host{display:inline-block;}\n\t\t\t.svg-import-wrap{\n\t\t\t\toverflow:hidden;\n\t\t\t\tmargin:0;\n\t\t\t\tpadding:0;\n\t\t\t\twidth:100%;\n\t\t\t\theight:100%;\n\t\t\t\tmin-width:5px;\n\t\t\t\tmin-height:5px;\n\t\t\t\tdisplay:block;\n\t\t\t}\n\t\t\tsvg{\n\t\t\t\twidth:100%;\n\t\t\t\theight:100%;\n\t\t\t}\n\t\t`;\n\n\t\tthis.src$.next(comp.src);\n\n\t\treturn [\n\t\t\t<style>{defBoxStyle + comp['inner-style']}</style>,\n\t\t\t<figure role=\"image\" className=\"svg-import-wrap\"></figure>\n\t\t]\n\t}\n});\n"],"names":["exports","root","window","self","global","Error","__extends","this","d","b","p","hasOwnProperty","__","constructor","prototype","Object","create","isFunction_1","require","Subscription_1","Observer_1","rxSubscriber_1","Subscriber","_super","destinationOrNext","error","complete","call","syncErrorValue","syncErrorThrown","syncErrorThrowable","isStopped","arguments","length","destination","empty","add","SafeSubscriber","$$rxSubscriber","next","subscriber","value","_next","err","_error","_complete","unsubscribe","closed","Subscription","_parent","observerOrNext","context","isFunction","bind","_context","__tryOrUnsub","__tryOrSetError","fn","parent","_unsubscribe","root_1","Symbol","for","Subscriber_1","toSubscriber","nextOrObserver","getSymbolObservable","$$observable","observable","toSubscriber_1","observable_1","Observable","subscribe","_isScalar","_subscribe","lift","operator","source","sink","forEach","PromiseCtor","_this","Rx","config","Promise","resolve","reject","subscription","isArray_1","isObject_1","tryCatch_1","errorObject_1","UnsubscriptionError_1","hasErrors","errors","_a","_subscriptions","trial","tryCatch","errorObject","push","e","isArray","index","len","sub","isObject","UnsubscriptionError","concat","teardown","EMPTY","remove","subscriptions","subscriptionIndex","indexOf","splice","ObjectUnsubscribedError","name","stack","message","SubjectSubscription","subject","observers","subscriberIndex","Observable_1","ObjectUnsubscribedError_1","SubjectSubscription_1","SubjectSubscriber","Subject","hasError","thrownError","AnonymousSubject","copy","slice","i","asObservable","Subject_1","BehaviorSubject","_value","defineProperty","getValue","tryCatchTarget","tryCatcher","apply","map","project","thisArg","TypeError","MapOperator","MapSubscriber","count","result","map_1","getCORSRequest","XMLHttpRequest","xhr","withCredentials","XDomainRequest","getXMLHttpRequest","progId","progIds","ActiveXObject","ajaxGet","url","headers","AjaxObservable","method","ajaxPost","body","ajaxDelete","ajaxPut","ajaxGetJSON","responseType","x","response","urlOrRequest","request","crossDomain","prop","AjaxSubscriber","get","post","delete","put","getJSON","done","FormData","serializeBody","send","AjaxResponse","_b","user","async","password","createXHR","open","timeout","setHeaders","setupEvents","contentType","splitIndex","substring","keys","key","encodeURI","join","JSON","stringify","setRequestHeader","progressSubscriber","xhrTimeout","AjaxTimeoutError","ontimeout","upload","xhrProgress_1","onprogress","xhrError_1","AjaxError","onerror","xhrReadyStateChange","readyState","status_1","status","responseText","onreadystatechange","abort","originalEvent","parse","responseXML","AjaxObservable_1","EmptyObservable","scheduler","dispatch","arg","schedule","EmptyObservable_1","empty_1","filter","predicate","FilterOperator","FilterSubscriber","filter_1","OuterSubscriber","notifyNext","outerValue","innerValue","outerIndex","innerIndex","innerSub","notifyError","notifyComplete","Array","isPromise","then","symbolIteratorPonyfill","iterator","Set_1","Set","Map_1","Map","getOwnPropertyNames","InnerSubscriber","isPromise_1","iterator_1","InnerSubscriber_1","subscribeToResult","outerSubscriber","setTimeout","$$iterator","item","obs","OuterSubscriber_1","subscribeToResult_1","_catch","selector","CatchOperator","caught","CatchSubscriber","catch_1","catch","switchMap","resultSelector","SwitchMapOperator","SwitchMapSubscriber","_innerSub","innerSubscription","_tryNotifyNext","switchMap_1","minimalSetImpl","MinimalSet","_values","has","clear","distinct","keySelector","flushes","DistinctOperator","DistinctSubscriber","values","_useKeySelector","_finalizeNext","distinct_1","customElements","define","string","attribute","src$","src","val","fetchXml","xml","ajax","cache","jQuery","parseXML","shadowRoot","find","comp","$","$svg","svg","removeAttribute","width","height","setAttribute","wraper","getWraper","innerHTML","appendChild","srcSubscription","updateXml","console","oldValue","newValue","defBoxStyle","h","Component"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACA;;;;;;AAKAA,QAAQC,IAAR,GAAgB,QAAOC,MAAP,yCAAOA,MAAP,MAAiB,QAAjB,IAA6BA,OAAOA,MAAP,KAAkBA,MAA/C,IAAyDA,MAAzD,IACT,QAAOC,IAAP,yCAAOA,IAAP,MAAe,QAAf,IAA2BA,KAAKA,IAAL,KAAcA,IAAzC,IAAiDA,IADxC,IAET,QAAOC,MAAP,yCAAOA,MAAP,MAAiB,QAAjB,IAA6BA,OAAOA,MAAP,KAAkBA,MAA/C,IAAyDA,MAFhE;AAGA,IAAI,CAACJ,QAAQC,IAAb,EAAmB;UACT,IAAII,KAAJ,CAAU,+DAAV,CAAN;;AAEJ;;;;;;;ACXA,IAAIC,cAAaC,aAAQA,UAAKD,SAAd,IAA4B,UAAUE,CAAV,EAAaC,CAAb,EAAgB;SACnD,IAAIC,CAAT,IAAcD,CAAd;YAAqBA,EAAEE,cAAF,CAAiBD,CAAjB,CAAJ,EAAyBF,EAAEE,CAAF,IAAOD,EAAEC,CAAF,CAAP;KAC1C,SAASE,EAAT,GAAc;aAAOC,WAAL,GAAmBL,CAAnB;;MACdM,SAAF,GAAcL,MAAM,IAAN,GAAaM,OAAOC,MAAP,CAAcP,CAAd,CAAb,IAAiCG,GAAGE,SAAH,GAAeL,EAAEK,SAAjB,EAA4B,IAAIF,EAAJ,EAA7D,CAAd;CAHJ;AAKA,IAAIK,eAAeC,QAAQ,mBAAR,CAAnB;AACA,IAAIC,mBAAiBD,QAAQ,gBAAR,CAArB;AACA,IAAIE,eAAaF,QAAQ,YAAR,CAAjB;AACA,IAAIG,mBAAiBH,QAAQ,uBAAR,CAArB;;;;;;;;;;;AAWA,IAAII,aAAc,UAAUC,MAAV,EAAkB;gBACtBD,UAAV,EAAsBC,MAAtB;;;;;;;;;aASSD,UAAT,CAAoBE,iBAApB,EAAuCC,KAAvC,EAA8CC,QAA9C,EAAwD;eAC7CC,IAAP,CAAY,IAAZ;aACKC,cAAL,GAAsB,IAAtB;aACKC,eAAL,GAAuB,KAAvB;aACKC,kBAAL,GAA0B,KAA1B;aACKC,SAAL,GAAiB,KAAjB;gBACQC,UAAUC,MAAlB;iBACS,CAAL;qBACSC,WAAL,GAAmBd,aAAWe,KAA9B;;iBAEC,CAAL;oBACQ,CAACX,iBAAL,EAAwB;yBACfU,WAAL,GAAmBd,aAAWe,KAA9B;;;oBAGA,QAAOX,iBAAP,yCAAOA,iBAAP,OAA6B,QAAjC,EAA2C;wBACnCA,6BAA6BF,UAAjC,EAA6C;6BACpCY,WAAL,GAAmBV,iBAAnB;6BACKU,WAAL,CAAiBE,GAAjB,CAAqB,IAArB;qBAFJ,MAIK;6BACIN,kBAAL,GAA0B,IAA1B;6BACKI,WAAL,GAAmB,IAAIG,cAAJ,CAAmB,IAAnB,EAAyBb,iBAAzB,CAAnB;;;;;qBAKHM,kBAAL,GAA0B,IAA1B;qBACKI,WAAL,GAAmB,IAAIG,cAAJ,CAAmB,IAAnB,EAAyBb,iBAAzB,EAA4CC,KAA5C,EAAmDC,QAAnD,CAAnB;;;;eAIDZ,SAAX,CAAqBO,iBAAeiB,cAApC,IAAsD,YAAY;eAAS,IAAP;KAApE;;;;;;;;;;;;eAYWtB,MAAX,GAAoB,UAAUuB,IAAV,EAAgBd,KAAhB,EAAuBC,QAAvB,EAAiC;YAC7Cc,aAAa,IAAIlB,UAAJ,CAAeiB,IAAf,EAAqBd,KAArB,EAA4BC,QAA5B,CAAjB;mBACWI,kBAAX,GAAgC,KAAhC;eACOU,UAAP;KAHJ;;;;;;;;eAYW1B,SAAX,CAAqByB,IAArB,GAA4B,UAAUE,KAAV,EAAiB;YACrC,CAAC,KAAKV,SAAV,EAAqB;iBACZW,KAAL,CAAWD,KAAX;;KAFR;;;;;;;;eAYW3B,SAAX,CAAqBW,KAArB,GAA6B,UAAUkB,GAAV,EAAe;YACpC,CAAC,KAAKZ,SAAV,EAAqB;iBACZA,SAAL,GAAiB,IAAjB;iBACKa,MAAL,CAAYD,GAAZ;;KAHR;;;;;;;eAYW7B,SAAX,CAAqBY,QAArB,GAAgC,YAAY;YACpC,CAAC,KAAKK,SAAV,EAAqB;iBACZA,SAAL,GAAiB,IAAjB;iBACKc,SAAL;;KAHR;eAMW/B,SAAX,CAAqBgC,WAArB,GAAmC,YAAY;YACvC,KAAKC,MAAT,EAAiB;;;aAGZhB,SAAL,GAAiB,IAAjB;eACOjB,SAAP,CAAiBgC,WAAjB,CAA6BnB,IAA7B,CAAkC,IAAlC;KALJ;eAOWb,SAAX,CAAqB4B,KAArB,GAA6B,UAAUD,KAAV,EAAiB;aACrCP,WAAL,CAAiBK,IAAjB,CAAsBE,KAAtB;KADJ;eAGW3B,SAAX,CAAqB8B,MAArB,GAA8B,UAAUD,GAAV,EAAe;aACpCT,WAAL,CAAiBT,KAAjB,CAAuBkB,GAAvB;aACKG,WAAL;KAFJ;eAIWhC,SAAX,CAAqB+B,SAArB,GAAiC,YAAY;aACpCX,WAAL,CAAiBR,QAAjB;aACKoB,WAAL;KAFJ;WAIOxB,UAAP;CAlHc,CAmHhBH,iBAAe6B,YAnHC,CAAlB;AAoHAhD,QAAQsB,UAAR,GAAqBA,UAArB;;;;;;AAMA,IAAIe,iBAAkB,UAAUd,MAAV,EAAkB;gBAC1Bc,cAAV,EAA0Bd,MAA1B;aACSc,cAAT,CAAwBY,OAAxB,EAAiCC,cAAjC,EAAiDzB,KAAjD,EAAwDC,QAAxD,EAAkE;eACvDC,IAAP,CAAY,IAAZ;aACKsB,OAAL,GAAeA,OAAf;YACIV,IAAJ;YACIY,UAAU,IAAd;YACIlC,aAAamC,UAAb,CAAwBF,cAAxB,CAAJ,EAA6C;mBAClCA,cAAP;SADJ,MAGK,IAAIA,cAAJ,EAAoB;sBACXA,cAAV;mBACOA,eAAeX,IAAtB;oBACQW,eAAezB,KAAvB;uBACWyB,eAAexB,QAA1B;gBACIT,aAAamC,UAAb,CAAwBD,QAAQL,WAAhC,CAAJ,EAAkD;qBACzCV,GAAL,CAASe,QAAQL,WAAR,CAAoBO,IAApB,CAAyBF,OAAzB,CAAT;;oBAEIL,WAAR,GAAsB,KAAKA,WAAL,CAAiBO,IAAjB,CAAsB,IAAtB,CAAtB;;aAECC,QAAL,GAAgBH,OAAhB;aACKT,KAAL,GAAaH,IAAb;aACKK,MAAL,GAAcnB,KAAd;aACKoB,SAAL,GAAiBnB,QAAjB;;mBAEWZ,SAAf,CAAyByB,IAAzB,GAAgC,UAAUE,KAAV,EAAiB;YACzC,CAAC,KAAKV,SAAN,IAAmB,KAAKW,KAA5B,EAAmC;gBAC3BO,UAAU,KAAKA,OAAnB;gBACI,CAACA,QAAQnB,kBAAb,EAAiC;qBACxByB,YAAL,CAAkB,KAAKb,KAAvB,EAA8BD,KAA9B;aADJ,MAGK,IAAI,KAAKe,eAAL,CAAqBP,OAArB,EAA8B,KAAKP,KAAnC,EAA0CD,KAA1C,CAAJ,EAAsD;qBAClDK,WAAL;;;KAPZ;mBAWehC,SAAf,CAAyBW,KAAzB,GAAiC,UAAUkB,GAAV,EAAe;YACxC,CAAC,KAAKZ,SAAV,EAAqB;gBACbkB,UAAU,KAAKA,OAAnB;gBACI,KAAKL,MAAT,EAAiB;oBACT,CAACK,QAAQnB,kBAAb,EAAiC;yBACxByB,YAAL,CAAkB,KAAKX,MAAvB,EAA+BD,GAA/B;yBACKG,WAAL;iBAFJ,MAIK;yBACIU,eAAL,CAAqBP,OAArB,EAA8B,KAAKL,MAAnC,EAA2CD,GAA3C;yBACKG,WAAL;;aAPR,MAUK,IAAI,CAACG,QAAQnB,kBAAb,EAAiC;qBAC7BgB,WAAL;sBACMH,GAAN;aAFC,MAIA;wBACOf,cAAR,GAAyBe,GAAzB;wBACQd,eAAR,GAA0B,IAA1B;qBACKiB,WAAL;;;KApBZ;mBAwBehC,SAAf,CAAyBY,QAAzB,GAAoC,YAAY;YACxC,CAAC,KAAKK,SAAV,EAAqB;gBACbkB,UAAU,KAAKA,OAAnB;gBACI,KAAKJ,SAAT,EAAoB;oBACZ,CAACI,QAAQnB,kBAAb,EAAiC;yBACxByB,YAAL,CAAkB,KAAKV,SAAvB;yBACKC,WAAL;iBAFJ,MAIK;yBACIU,eAAL,CAAqBP,OAArB,EAA8B,KAAKJ,SAAnC;yBACKC,WAAL;;aAPR,MAUK;qBACIA,WAAL;;;KAdZ;mBAkBehC,SAAf,CAAyByC,YAAzB,GAAwC,UAAUE,EAAV,EAAchB,KAAd,EAAqB;YACrD;eACGd,IAAH,CAAQ,KAAK2B,QAAb,EAAuBb,KAAvB;SADJ,CAGA,OAAOE,GAAP,EAAY;iBACHG,WAAL;kBACMH,GAAN;;KANR;mBASe7B,SAAf,CAAyB0C,eAAzB,GAA2C,UAAUE,MAAV,EAAkBD,EAAlB,EAAsBhB,KAAtB,EAA6B;YAChE;eACGd,IAAH,CAAQ,KAAK2B,QAAb,EAAuBb,KAAvB;SADJ,CAGA,OAAOE,GAAP,EAAY;mBACDf,cAAP,GAAwBe,GAAxB;mBACOd,eAAP,GAAyB,IAAzB;mBACO,IAAP;;eAEG,KAAP;KATJ;mBAWef,SAAf,CAAyB6C,YAAzB,GAAwC,YAAY;YAC5CV,UAAU,KAAKA,OAAnB;aACKK,QAAL,GAAgB,IAAhB;aACKL,OAAL,GAAe,IAAf;gBACQH,WAAR;KAJJ;WAMOT,cAAP;CAxGkB,CAyGpBf,UAzGoB,CAAtB;AA0GA;;;;;;;;;ACvPA,IAAIsC,WAAS1C,UAAb;AACA,IAAI2C,UAASD,SAAO3D,IAAP,CAAY4D,MAAzB;AACA7D,qBAA0B,OAAO6D,OAAP,KAAkB,UAAlB,IAAgC,OAAOA,QAAOC,GAAd,KAAsB,UAAvD,GACrBD,QAAOC,GAAP,CAAW,cAAX,CADqB,GACQ,gBADjC;;;;;;ACFA9D,YAAgB;YACJ,IADI;UAEN,cAAUyC,KAAV,EAAiB,EAFX;WAGL,eAAUE,GAAV,EAAe;cAAQA,GAAN;KAHZ;cAIF,oBAAY;CAJ1B;;;;;;;;ACAA,IAAIoB,iBAAe7C,YAAnB;AACA,IAAIG,mBAAiBH,YAArB;AACA,IAAIE,aAAaF,QAAjB;AACA,SAAS8C,YAAT,CAAsBC,cAAtB,EAAsCxC,KAAtC,EAA6CC,QAA7C,EAAuD;QAC/CuC,cAAJ,EAAoB;YACZA,0BAA0BF,eAAazC,UAA3C,EAAuD;mBAC5C2C,cAAP;;YAEAA,eAAe5C,iBAAeiB,cAA9B,CAAJ,EAAmD;mBACxC2B,eAAe5C,iBAAeiB,cAA9B,GAAP;;;QAGJ,CAAC2B,cAAD,IAAmB,CAACxC,KAApB,IAA6B,CAACC,QAAlC,EAA4C;eACjC,IAAIqC,eAAazC,UAAjB,CAA4BF,WAAWe,KAAvC,CAAP;;WAEG,IAAI4B,eAAazC,UAAjB,CAA4B2C,cAA5B,EAA4CxC,KAA5C,EAAmDC,QAAnD,CAAP;;AAEJ1B,qBAAuBgE,YAAvB;;;;;;ACjBA,IAAIJ,WAAS1C,UAAb;AACA,SAASgD,mBAAT,CAA6Bf,OAA7B,EAAsC;QAC9BgB,YAAJ;QACIN,UAASV,QAAQU,MAArB;QACI,OAAOA,OAAP,KAAkB,UAAtB,EAAkC;YAC1BA,QAAOO,UAAX,EAAuB;2BACJP,QAAOO,UAAtB;SADJ,MAGK;2BACcP,QAAO,YAAP,CAAf;oBACOO,UAAP,GAAoBD,YAApB;;KANR,MASK;uBACc,cAAf;;WAEGA,YAAP;;AAEJnE,4BAA8BkE,mBAA9B;AACAlE,mBAAuBkE,oBAAoBN,SAAO3D,IAA3B,CAAvB;;;;;;;ACnBA,IAAI2D,SAAS1C,UAAb;AACA,IAAImD,iBAAiBnD,gBAArB;AACA,IAAIoD,eAAepD,UAAnB;;;;;;;AAOA,IAAIqD,aAAc,YAAY;;;;;;;;aAQjBA,UAAT,CAAoBC,SAApB,EAA+B;aACtBC,SAAL,GAAiB,KAAjB;YACID,SAAJ,EAAe;iBACNE,UAAL,GAAkBF,SAAlB;;;;;;;;;;eAUG1D,SAAX,CAAqB6D,IAArB,GAA4B,UAAUC,QAAV,EAAoB;YACxCR,gBAAa,IAAIG,UAAJ,EAAjB;sBACWM,MAAX,GAAoB,IAApB;sBACWD,QAAX,GAAsBA,QAAtB;eACOR,aAAP;KAJJ;eAMWtD,SAAX,CAAqB0D,SAArB,GAAiC,UAAUtB,cAAV,EAA0BzB,KAA1B,EAAiCC,QAAjC,EAA2C;YACpEkD,WAAW,KAAKA,QAApB;YACIE,OAAOT,eAAeL,YAAf,CAA4Bd,cAA5B,EAA4CzB,KAA5C,EAAmDC,QAAnD,CAAX;YACIkD,QAAJ,EAAc;qBACDjD,IAAT,CAAcmD,IAAd,EAAoB,IAApB;SADJ,MAGK;iBACI1C,GAAL,CAAS,KAAKsC,UAAL,CAAgBI,IAAhB,CAAT;;YAEAA,KAAKhD,kBAAT,EAA6B;iBACpBA,kBAAL,GAA0B,KAA1B;gBACIgD,KAAKjD,eAAT,EAA0B;sBAChBiD,KAAKlD,cAAX;;;eAGDkD,IAAP;KAfJ;;;;;;;;eAwBWhE,SAAX,CAAqBiE,OAArB,GAA+B,UAAUxC,IAAV,EAAgByC,WAAhB,EAA6B;YACpDC,QAAQ,IAAZ;YACI,CAACD,WAAL,EAAkB;gBACVpB,OAAO3D,IAAP,CAAYiF,EAAZ,IAAkBtB,OAAO3D,IAAP,CAAYiF,EAAZ,CAAeC,MAAjC,IAA2CvB,OAAO3D,IAAP,CAAYiF,EAAZ,CAAeC,MAAf,CAAsBC,OAArE,EAA8E;8BAC5DxB,OAAO3D,IAAP,CAAYiF,EAAZ,CAAeC,MAAf,CAAsBC,OAApC;aADJ,MAGK,IAAIxB,OAAO3D,IAAP,CAAYmF,OAAhB,EAAyB;8BACZxB,OAAO3D,IAAP,CAAYmF,OAA1B;;;YAGJ,CAACJ,WAAL,EAAkB;kBACR,IAAI3E,KAAJ,CAAU,uBAAV,CAAN;;eAEG,IAAI2E,WAAJ,CAAgB,UAAUK,OAAV,EAAmBC,MAAnB,EAA2B;gBAC1CC,eAAeN,MAAMT,SAAN,CAAgB,UAAU/B,KAAV,EAAiB;oBAC5C8C,YAAJ,EAAkB;;;;;wBAKV;6BACK9C,KAAL;qBADJ,CAGA,OAAOE,GAAP,EAAY;+BACDA,GAAP;qCACaG,WAAb;;iBAVR,MAaK;;;;;;;yBAOIL,KAAL;;aArBW,EAuBhB6C,MAvBgB,EAuBRD,OAvBQ,CAAnB;SADG,CAAP;KAbJ;eAwCWvE,SAAX,CAAqB4D,UAArB,GAAkC,UAAUlC,UAAV,EAAsB;eAC7C,KAAKqC,MAAL,CAAYL,SAAZ,CAAsBhC,UAAtB,CAAP;KADJ;;;;;;eAQW1B,SAAX,CAAqBwD,aAAaH,YAAlC,IAAkD,YAAY;eACnD,IAAP;KADJ;;;;;;;;;;;eAaWnD,MAAX,GAAoB,UAAUwD,SAAV,EAAqB;eAC9B,IAAID,UAAJ,CAAeC,SAAf,CAAP;KADJ;WAGOD,UAAP;CAnHc,EAAlB;AAqHAvE,mBAAqBuE,UAArB;;;;;;AC9HA,IAAIiB,YAAYtE,QAAQ,gBAAR,CAAhB;AACA,IAAIuE,aAAavE,QAAQ,iBAAR,CAAjB;AACA,IAAID,iBAAeC,QAAQ,mBAAR,CAAnB;AACA,IAAIwE,aAAaxE,QAAQ,iBAAR,CAAjB;AACA,IAAIyE,gBAAgBzE,QAAQ,oBAAR,CAApB;AACA,IAAI0E,wBAAwB1E,QAAQ,4BAAR,CAA5B;;;;;;;;;;;;;AAaA,IAAI8B,eAAgB,YAAY;;;;;aAKnBA,YAAT,CAAsBF,WAAtB,EAAmC;;;;;aAK1BC,MAAL,GAAc,KAAd;YACID,WAAJ,EAAiB;iBACRa,YAAL,GAAoBb,WAApB;;;;;;;;;iBASKhC,SAAb,CAAuBgC,WAAvB,GAAqC,YAAY;YACzC+C,YAAY,KAAhB;YACIC,MAAJ;YACI,KAAK/C,MAAT,EAAiB;;;aAGZA,MAAL,GAAc,IAAd;YACIgD,KAAK,IAAT;YAAepC,eAAeoC,GAAGpC,YAAjC;YAA+CqC,iBAAiBD,GAAGC,cAAnE;aACKA,cAAL,GAAsB,IAAtB;YACI/E,eAAamC,UAAb,CAAwBO,YAAxB,CAAJ,EAA2C;gBACnCsC,QAAQP,WAAWQ,QAAX,CAAoBvC,YAApB,EAAkChC,IAAlC,CAAuC,IAAvC,CAAZ;gBACIsE,UAAUN,cAAcQ,WAA5B,EAAyC;4BACzB,IAAZ;iBACCL,SAASA,UAAU,EAApB,EAAwBM,IAAxB,CAA6BT,cAAcQ,WAAd,CAA0BE,CAAvD;;;YAGJb,UAAUc,OAAV,CAAkBN,cAAlB,CAAJ,EAAuC;gBAC/BO,QAAQ,CAAC,CAAb;gBACIC,MAAMR,eAAe/D,MAAzB;mBACO,EAAEsE,KAAF,GAAUC,GAAjB,EAAsB;oBACdC,MAAMT,eAAeO,KAAf,CAAV;oBACId,WAAWiB,QAAX,CAAoBD,GAApB,CAAJ,EAA8B;wBACtBR,QAAQP,WAAWQ,QAAX,CAAoBO,IAAI3D,WAAxB,EAAqCnB,IAArC,CAA0C8E,GAA1C,CAAZ;wBACIR,UAAUN,cAAcQ,WAA5B,EAAyC;oCACzB,IAAZ;iCACSL,UAAU,EAAnB;4BACInD,MAAMgD,cAAcQ,WAAd,CAA0BE,CAApC;4BACI1D,eAAeiD,sBAAsBe,mBAAzC,EAA8D;qCACjDb,OAAOc,MAAP,CAAcjE,IAAImD,MAAlB,CAAT;yBADJ,MAGK;mCACMM,IAAP,CAAYzD,GAAZ;;;;;;YAMhBkD,SAAJ,EAAe;kBACL,IAAID,sBAAsBe,mBAA1B,CAA8Cb,MAA9C,CAAN;;KAtCR;;;;;;;;;;;;;;;;;;;iBA2DahF,SAAb,CAAuBsB,GAAvB,GAA6B,UAAUyE,QAAV,EAAoB;YACzC,CAACA,QAAD,IAAcA,aAAa7D,aAAa8D,KAA5C,EAAoD;mBACzC9D,aAAa8D,KAApB;;YAEAD,aAAa,IAAjB,EAAuB;mBACZ,IAAP;;YAEAJ,MAAMI,QAAV;uBACeA,QAAf,yCAAeA,QAAf;iBACS,UAAL;sBACU,IAAI7D,YAAJ,CAAiB6D,QAAjB,CAAN;iBACC,QAAL;oBACQJ,IAAI1D,MAAJ,IAAc,OAAO0D,IAAI3D,WAAX,KAA2B,UAA7C,EAAyD;;iBAAzD,MAGK,IAAI,KAAKC,MAAT,EAAiB;wBACdD,WAAJ;iBADC,MAGA;qBACA,KAAKkD,cAAL,KAAwB,KAAKA,cAAL,GAAsB,EAA9C,CAAD,EAAoDI,IAApD,CAAyDK,GAAzD;;;;sBAIE,IAAIpG,KAAJ,CAAU,2BAA2BwG,QAA3B,GAAsC,yBAAhD,CAAN;;eAEDJ,GAAP;KAzBJ;;;;;;;iBAiCa3F,SAAb,CAAuBiG,MAAvB,GAAgC,UAAUxB,YAAV,EAAwB;;YAEhDA,gBAAgB,IAAhB,IAAyBA,iBAAiB,IAA1C,IAAoDA,iBAAiBvC,aAAa8D,KAAtF,EAA8F;;;YAG1FE,gBAAgB,KAAKhB,cAAzB;YACIgB,aAAJ,EAAmB;gBACXC,oBAAoBD,cAAcE,OAAd,CAAsB3B,YAAtB,CAAxB;gBACI0B,sBAAsB,CAAC,CAA3B,EAA8B;8BACZE,MAAd,CAAqBF,iBAArB,EAAwC,CAAxC;;;KATZ;iBAaaH,KAAb,GAAsB,UAAU3E,KAAV,EAAiB;cAC7BY,MAAN,GAAe,IAAf;eACOZ,KAAP;KAFkB,CAGpB,IAAIa,YAAJ,EAHoB,CAAtB;WAIOA,YAAP;CAlIgB,EAApB;AAoIAhD,QAAQgD,YAAR,GAAuBA,YAAvB;AACA;;;;;;;ACvJA,IAAI1C,cAAaC,kBAAQA,eAAKD,SAAd,IAA4B,UAAUE,CAAV,EAAaC,CAAb,EAAgB;SACnD,IAAIC,CAAT,IAAcD,CAAd;YAAqBA,EAAEE,cAAF,CAAiBD,CAAjB,CAAJ,EAAyBF,EAAEE,CAAF,IAAOD,EAAEC,CAAF,CAAP;KAC1C,SAASE,EAAT,GAAc;aAAOC,WAAL,GAAmBL,CAAnB;;MACdM,SAAF,GAAcL,MAAM,IAAN,GAAaM,OAAOC,MAAP,CAAcP,CAAd,CAAb,IAAiCG,GAAGE,SAAH,GAAeL,EAAEK,SAAjB,EAA4B,IAAIF,EAAJ,EAA7D,CAAd;CAHJ;;;;;;;;;;AAcA,IAAIwG,0BAA2B,UAAU7F,MAAV,EAAkB;gBACnC6F,uBAAV,EAAmC7F,MAAnC;aACS6F,uBAAT,GAAmC;YAC3BzE,MAAMpB,OAAOI,IAAP,CAAY,IAAZ,EAAkB,qBAAlB,CAAV;aACK0F,IAAL,GAAY1E,IAAI0E,IAAJ,GAAW,yBAAvB;aACKC,KAAL,GAAa3E,IAAI2E,KAAjB;aACKC,OAAL,GAAe5E,IAAI4E,OAAnB;;WAEGH,uBAAP;CAR2B,CAS7B/G,KAT6B,CAA/B;AAUAL,gCAAkCoH,uBAAlC;;;;;;;;ACxBA,IAAI9G,cAAaC,kBAAQA,eAAKD,SAAd,IAA4B,UAAUE,CAAV,EAAaC,CAAb,EAAgB;SACnD,IAAIC,CAAT,IAAcD,CAAd;YAAqBA,EAAEE,cAAF,CAAiBD,CAAjB,CAAJ,EAAyBF,EAAEE,CAAF,IAAOD,EAAEC,CAAF,CAAP;KAC1C,SAASE,EAAT,GAAc;aAAOC,WAAL,GAAmBL,CAAnB;;MACdM,SAAF,GAAcL,MAAM,IAAN,GAAaM,OAAOC,MAAP,CAAcP,CAAd,CAAb,IAAiCG,GAAGE,SAAH,GAAeL,EAAEK,SAAjB,EAA4B,IAAIF,EAAJ,EAA7D,CAAd;CAHJ;AAKA,IAAIO,mBAAiBD,YAArB;;;;;;AAMA,IAAIsG,sBAAuB,UAAUjG,MAAV,EAAkB;gBAC/BiG,mBAAV,EAA+BjG,MAA/B;aACSiG,mBAAT,CAA6BC,OAA7B,EAAsCjF,UAAtC,EAAkD;eACvCb,IAAP,CAAY,IAAZ;aACK8F,OAAL,GAAeA,OAAf;aACKjF,UAAL,GAAkBA,UAAlB;aACKO,MAAL,GAAc,KAAd;;wBAEgBjC,SAApB,CAA8BgC,WAA9B,GAA4C,YAAY;YAChD,KAAKC,MAAT,EAAiB;;;aAGZA,MAAL,GAAc,IAAd;YACI0E,UAAU,KAAKA,OAAnB;YACIC,YAAYD,QAAQC,SAAxB;aACKD,OAAL,GAAe,IAAf;YACI,CAACC,SAAD,IAAcA,UAAUzF,MAAV,KAAqB,CAAnC,IAAwCwF,QAAQ1F,SAAhD,IAA6D0F,QAAQ1E,MAAzE,EAAiF;;;YAG7E4E,kBAAkBD,UAAUR,OAAV,CAAkB,KAAK1E,UAAvB,CAAtB;YACImF,oBAAoB,CAAC,CAAzB,EAA4B;sBACdR,MAAV,CAAiBQ,eAAjB,EAAkC,CAAlC;;KAbR;WAgBOH,mBAAP;CAxBuB,CAyBzBrG,iBAAe6B,YAzBU,CAA3B;AA0BAhD,4BAA8BwH,mBAA9B;;;;;;ACrCA,IAAIlH,cAAaC,kBAAQA,eAAKD,SAAd,IAA4B,UAAUE,CAAV,EAAaC,CAAb,EAAgB;SACnD,IAAIC,CAAT,IAAcD,CAAd;YAAqBA,EAAEE,cAAF,CAAiBD,CAAjB,CAAJ,EAAyBF,EAAEE,CAAF,IAAOD,EAAEC,CAAF,CAAP;KAC1C,SAASE,EAAT,GAAc;aAAOC,WAAL,GAAmBL,CAAnB;;MACdM,SAAF,GAAcL,MAAM,IAAN,GAAaM,OAAOC,MAAP,CAAcP,CAAd,CAAb,IAAiCG,GAAGE,SAAH,GAAeL,EAAEK,SAAjB,EAA4B,IAAIF,EAAJ,EAA7D,CAAd;CAHJ;AAKA,IAAIgH,eAAe1G,cAAnB;AACA,IAAI6C,eAAe7C,YAAnB;AACA,IAAIC,iBAAiBD,YAArB;AACA,IAAI2G,8BAA4B3G,2BAAhC;AACA,IAAI4G,wBAAwB5G,uBAA5B;AACA,IAAIG,iBAAiBH,YAArB;;;;AAIA,IAAI6G,oBAAqB,UAAUxG,MAAV,EAAkB;gBAC7BwG,iBAAV,EAA6BxG,MAA7B;aACSwG,iBAAT,CAA2B7F,WAA3B,EAAwC;eAC7BP,IAAP,CAAY,IAAZ,EAAkBO,WAAlB;aACKA,WAAL,GAAmBA,WAAnB;;WAEG6F,iBAAP;CANqB,CAOvBhE,aAAazC,UAPU,CAAzB;AAQAtB,0BAA4B+H,iBAA5B;;;;AAIA,IAAIC,UAAW,UAAUzG,MAAV,EAAkB;gBACnByG,OAAV,EAAmBzG,MAAnB;aACSyG,OAAT,GAAmB;eACRrG,IAAP,CAAY,IAAZ;aACK+F,SAAL,GAAiB,EAAjB;aACK3E,MAAL,GAAc,KAAd;aACKhB,SAAL,GAAiB,KAAjB;aACKkG,QAAL,GAAgB,KAAhB;aACKC,WAAL,GAAmB,IAAnB;;YAEIpH,SAAR,CAAkBO,eAAeiB,cAAjC,IAAmD,YAAY;eACpD,IAAIyF,iBAAJ,CAAsB,IAAtB,CAAP;KADJ;YAGQjH,SAAR,CAAkB6D,IAAlB,GAAyB,UAAUC,QAAV,EAAoB;YACrC6C,UAAU,IAAIU,gBAAJ,CAAqB,IAArB,EAA2B,IAA3B,CAAd;gBACQvD,QAAR,GAAmBA,QAAnB;eACO6C,OAAP;KAHJ;YAKQ3G,SAAR,CAAkByB,IAAlB,GAAyB,UAAUE,KAAV,EAAiB;YAClC,KAAKM,MAAT,EAAiB;kBACP,IAAI8E,4BAA0BT,uBAA9B,EAAN;;YAEA,CAAC,KAAKrF,SAAV,EAAqB;gBACb2F,YAAY,KAAKA,SAArB;gBACIlB,MAAMkB,UAAUzF,MAApB;gBACImG,OAAOV,UAAUW,KAAV,EAAX;iBACK,IAAIC,IAAI,CAAb,EAAgBA,IAAI9B,GAApB,EAAyB8B,GAAzB,EAA8B;qBACrBA,CAAL,EAAQ/F,IAAR,CAAaE,KAAb;;;KATZ;YAaQ3B,SAAR,CAAkBW,KAAlB,GAA0B,UAAUkB,GAAV,EAAe;YACjC,KAAKI,MAAT,EAAiB;kBACP,IAAI8E,4BAA0BT,uBAA9B,EAAN;;aAECa,QAAL,GAAgB,IAAhB;aACKC,WAAL,GAAmBvF,GAAnB;aACKZ,SAAL,GAAiB,IAAjB;YACI2F,YAAY,KAAKA,SAArB;YACIlB,MAAMkB,UAAUzF,MAApB;YACImG,OAAOV,UAAUW,KAAV,EAAX;aACK,IAAIC,IAAI,CAAb,EAAgBA,IAAI9B,GAApB,EAAyB8B,GAAzB,EAA8B;iBACrBA,CAAL,EAAQ7G,KAAR,CAAckB,GAAd;;aAEC+E,SAAL,CAAezF,MAAf,GAAwB,CAAxB;KAbJ;YAeQnB,SAAR,CAAkBY,QAAlB,GAA6B,YAAY;YACjC,KAAKqB,MAAT,EAAiB;kBACP,IAAI8E,4BAA0BT,uBAA9B,EAAN;;aAECrF,SAAL,GAAiB,IAAjB;YACI2F,YAAY,KAAKA,SAArB;YACIlB,MAAMkB,UAAUzF,MAApB;YACImG,OAAOV,UAAUW,KAAV,EAAX;aACK,IAAIC,IAAI,CAAb,EAAgBA,IAAI9B,GAApB,EAAyB8B,GAAzB,EAA8B;iBACrBA,CAAL,EAAQ5G,QAAR;;aAECgG,SAAL,CAAezF,MAAf,GAAwB,CAAxB;KAXJ;YAaQnB,SAAR,CAAkBgC,WAAlB,GAAgC,YAAY;aACnCf,SAAL,GAAiB,IAAjB;aACKgB,MAAL,GAAc,IAAd;aACK2E,SAAL,GAAiB,IAAjB;KAHJ;YAKQ5G,SAAR,CAAkB4D,UAAlB,GAA+B,UAAUlC,UAAV,EAAsB;YAC7C,KAAKO,MAAT,EAAiB;kBACP,IAAI8E,4BAA0BT,uBAA9B,EAAN;SADJ,MAGK,IAAI,KAAKa,QAAT,EAAmB;uBACTxG,KAAX,CAAiB,KAAKyG,WAAtB;mBACO/G,eAAe6B,YAAf,CAA4B8D,KAAnC;SAFC,MAIA,IAAI,KAAK/E,SAAT,EAAoB;uBACVL,QAAX;mBACOP,eAAe6B,YAAf,CAA4B8D,KAAnC;SAFC,MAIA;iBACIY,SAAL,CAAetB,IAAf,CAAoB5D,UAApB;mBACO,IAAIsF,sBAAsBN,mBAA1B,CAA8C,IAA9C,EAAoDhF,UAApD,CAAP;;KAdR;YAiBQ1B,SAAR,CAAkByH,YAAlB,GAAiC,YAAY;YACrCnE,aAAa,IAAIwD,aAAarD,UAAjB,EAAjB;mBACWM,MAAX,GAAoB,IAApB;eACOT,UAAP;KAHJ;YAKQpD,MAAR,GAAiB,UAAUkB,WAAV,EAAuB2C,MAAvB,EAA+B;eACrC,IAAIsD,gBAAJ,CAAqBjG,WAArB,EAAkC2C,MAAlC,CAAP;KADJ;WAGOmD,OAAP;CAzFW,CA0FbJ,aAAarD,UA1FA,CAAf;AA2FAvE,gBAAkBgI,OAAlB;;;;AAIA,IAAIG,mBAAoB,UAAU5G,MAAV,EAAkB;gBAC5B4G,gBAAV,EAA4B5G,MAA5B;aACS4G,gBAAT,CAA0BjG,WAA1B,EAAuC2C,MAAvC,EAA+C;eACpClD,IAAP,CAAY,IAAZ;aACKO,WAAL,GAAmBA,WAAnB;aACK2C,MAAL,GAAcA,MAAd;;qBAEa/D,SAAjB,CAA2ByB,IAA3B,GAAkC,UAAUE,KAAV,EAAiB;YAC3CP,cAAc,KAAKA,WAAvB;YACIA,eAAeA,YAAYK,IAA/B,EAAqC;wBACrBA,IAAZ,CAAiBE,KAAjB;;KAHR;qBAMiB3B,SAAjB,CAA2BW,KAA3B,GAAmC,UAAUkB,GAAV,EAAe;YAC1CT,cAAc,KAAKA,WAAvB;YACIA,eAAeA,YAAYT,KAA/B,EAAsC;iBAC7BS,WAAL,CAAiBT,KAAjB,CAAuBkB,GAAvB;;KAHR;qBAMiB7B,SAAjB,CAA2BY,QAA3B,GAAsC,YAAY;YAC1CQ,cAAc,KAAKA,WAAvB;YACIA,eAAeA,YAAYR,QAA/B,EAAyC;iBAChCQ,WAAL,CAAiBR,QAAjB;;KAHR;qBAMiBZ,SAAjB,CAA2B4D,UAA3B,GAAwC,UAAUlC,UAAV,EAAsB;YACtDqC,SAAS,KAAKA,MAAlB;YACIA,MAAJ,EAAY;mBACD,KAAKA,MAAL,CAAYL,SAAZ,CAAsBhC,UAAtB,CAAP;SADJ,MAGK;mBACMrB,eAAe6B,YAAf,CAA4B8D,KAAnC;;KANR;WASOqB,gBAAP;CAlCoB,CAmCtBH,OAnCsB,CAAxB;AAoCAhI,yBAA2BmI,gBAA3B;;;;;;;;AC7JA,IAAI7H,YAAaC,kBAAQA,eAAKD,SAAd,IAA4B,UAAUE,CAAV,EAAaC,CAAb,EAAgB;SACnD,IAAIC,CAAT,IAAcD,CAAd;YAAqBA,EAAEE,cAAF,CAAiBD,CAAjB,CAAJ,EAAyBF,EAAEE,CAAF,IAAOD,EAAEC,CAAF,CAAP;KAC1C,SAASE,EAAT,GAAc;aAAOC,WAAL,GAAmBL,CAAnB;;MACdM,SAAF,GAAcL,MAAM,IAAN,GAAaM,OAAOC,MAAP,CAAcP,CAAd,CAAb,IAAiCG,GAAGE,SAAH,GAAeL,EAAEK,SAAjB,EAA4B,IAAIF,EAAJ,EAA7D,CAAd;CAHJ;AAKA,IAAI4H,YAAYtH,WAAhB;AACA,IAAI2G,4BAA4B3G,2BAAhC;;;;AAIA,IAAIuH,kBAAmB,UAAUlH,MAAV,EAAkB;cAC3BkH,eAAV,EAA2BlH,MAA3B;aACSkH,eAAT,CAAyBC,MAAzB,EAAiC;eACtB/G,IAAP,CAAY,IAAZ;aACK+G,MAAL,GAAcA,MAAd;;WAEGC,cAAP,CAAsBF,gBAAgB3H,SAAtC,EAAiD,OAAjD,EAA0D;aACjD,eAAY;mBACN,KAAK8H,QAAL,EAAP;SAFkD;oBAI1C,IAJ0C;sBAKxC;KALlB;oBAOgB9H,SAAhB,CAA0B4D,UAA1B,GAAuC,UAAUlC,UAAV,EAAsB;YACrD+C,eAAehE,OAAOT,SAAP,CAAiB4D,UAAjB,CAA4B/C,IAA5B,CAAiC,IAAjC,EAAuCa,UAAvC,CAAnB;YACI+C,gBAAgB,CAACA,aAAaxC,MAAlC,EAA0C;uBAC3BR,IAAX,CAAgB,KAAKmG,MAArB;;eAEGnD,YAAP;KALJ;oBAOgBzE,SAAhB,CAA0B8H,QAA1B,GAAqC,YAAY;YACzC,KAAKX,QAAT,EAAmB;kBACT,KAAKC,WAAX;SADJ,MAGK,IAAI,KAAKnF,MAAT,EAAiB;kBACZ,IAAI8E,0BAA0BT,uBAA9B,EAAN;SADC,MAGA;mBACM,KAAKsB,MAAZ;;KARR;oBAWgB5H,SAAhB,CAA0ByB,IAA1B,GAAiC,UAAUE,KAAV,EAAiB;eACvC3B,SAAP,CAAiByB,IAAjB,CAAsBZ,IAAtB,CAA2B,IAA3B,EAAiC,KAAK+G,MAAL,GAAcjG,KAA/C;KADJ;WAGOgG,eAAP;CAlCmB,CAmCrBD,UAAUR,OAnCW,CAAvB;AAoCAhI,wBAA0ByI,eAA1B;;;;AC7CAzI,sBAAsB,EAAEqG,GAAG,EAAL,EAAtB;;;;;;ACDA,IAAIV,kBAAgBzE,WAApB;AACA,IAAI2H,cAAJ;AACA,SAASC,UAAT,GAAsB;QACd;eACOD,eAAeE,KAAf,CAAqB,IAArB,EAA2B/G,SAA3B,CAAP;KADJ,CAGA,OAAOqE,CAAP,EAAU;wBACQF,WAAd,CAA0BE,CAA1B,GAA8BA,CAA9B;eACOV,gBAAcQ,WAArB;;;AAGR,SAASD,QAAT,CAAkBzC,EAAlB,EAAsB;qBACDA,EAAjB;WACOqF,UAAP;;AAEJ9I,iBAAmBkG,QAAnB;AACA;;;;;;AChBA,IAAI5F,cAAaC,kBAAQA,eAAKD,SAAd,IAA4B,UAAUE,CAAV,EAAaC,CAAb,EAAgB;SACnD,IAAIC,CAAT,IAAcD,CAAd;YAAqBA,EAAEE,cAAF,CAAiBD,CAAjB,CAAJ,EAAyBF,EAAEE,CAAF,IAAOD,EAAEC,CAAF,CAAP;KAC1C,SAASE,EAAT,GAAc;aAAOC,WAAL,GAAmBL,CAAnB;;MACdM,SAAF,GAAcL,MAAM,IAAN,GAAaM,OAAOC,MAAP,CAAcP,CAAd,CAAb,IAAiCG,GAAGE,SAAH,GAAeL,EAAEK,SAAjB,EAA4B,IAAIF,EAAJ,EAA7D,CAAd;CAHJ;AAKA,IAAImD,iBAAe7C,YAAnB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkCA,SAAS8H,GAAT,CAAaC,OAAb,EAAsBC,OAAtB,EAA+B;QACvB,OAAOD,OAAP,KAAmB,UAAvB,EAAmC;cACzB,IAAIE,SAAJ,CAAc,4DAAd,CAAN;;WAEG,KAAKxE,IAAL,CAAU,IAAIyE,WAAJ,CAAgBH,OAAhB,EAAyBC,OAAzB,CAAV,CAAP;;AAEJlJ,YAAcgJ,GAAd;AACA,IAAII,cAAe,YAAY;aAClBA,WAAT,CAAqBH,OAArB,EAA8BC,OAA9B,EAAuC;aAC9BD,OAAL,GAAeA,OAAf;aACKC,OAAL,GAAeA,OAAf;;gBAEQpI,SAAZ,CAAsBa,IAAtB,GAA6B,UAAUa,UAAV,EAAsBqC,MAAtB,EAA8B;eAChDA,OAAOH,UAAP,CAAkB,IAAI2E,aAAJ,CAAkB7G,UAAlB,EAA8B,KAAKyG,OAAnC,EAA4C,KAAKC,OAAjD,CAAlB,CAAP;KADJ;WAGOE,WAAP;CARe,EAAnB;AAUApJ,oBAAsBoJ,WAAtB;;;;;;AAMA,IAAIC,gBAAiB,UAAU9H,MAAV,EAAkB;gBACzB8H,aAAV,EAAyB9H,MAAzB;aACS8H,aAAT,CAAuBnH,WAAvB,EAAoC+G,OAApC,EAA6CC,OAA7C,EAAsD;eAC3CvH,IAAP,CAAY,IAAZ,EAAkBO,WAAlB;aACK+G,OAAL,GAAeA,OAAf;aACKK,KAAL,GAAa,CAAb;aACKJ,OAAL,GAAeA,WAAW,IAA1B;;;;kBAIUpI,SAAd,CAAwB4B,KAAxB,GAAgC,UAAUD,KAAV,EAAiB;YACzC8G,MAAJ;YACI;qBACS,KAAKN,OAAL,CAAatH,IAAb,CAAkB,KAAKuH,OAAvB,EAAgCzG,KAAhC,EAAuC,KAAK6G,KAAL,EAAvC,CAAT;SADJ,CAGA,OAAO3G,GAAP,EAAY;iBACHT,WAAL,CAAiBT,KAAjB,CAAuBkB,GAAvB;;;aAGCT,WAAL,CAAiBK,IAAjB,CAAsBgH,MAAtB;KATJ;WAWOF,aAAP;CArBiB,CAsBnBtF,eAAazC,UAtBM,CAArB;;;;;;;AC9DA,IAAIhB,cAAaC,kBAAQA,eAAKD,SAAd,IAA4B,UAAUE,CAAV,EAAaC,CAAb,EAAgB;SACnD,IAAIC,CAAT,IAAcD,CAAd;YAAqBA,EAAEE,cAAF,CAAiBD,CAAjB,CAAJ,EAAyBF,EAAEE,CAAF,IAAOD,EAAEC,CAAF,CAAP;KAC1C,SAASE,EAAT,GAAc;aAAOC,WAAL,GAAmBL,CAAnB;;MACdM,SAAF,GAAcL,MAAM,IAAN,GAAaM,OAAOC,MAAP,CAAcP,CAAd,CAAb,IAAiCG,GAAGE,SAAH,GAAeL,EAAEK,SAAjB,EAA4B,IAAIF,EAAJ,EAA7D,CAAd;CAHJ;AAKA,IAAIgD,WAAS1C,UAAb;AACA,IAAIwE,eAAaxE,YAAjB;AACA,IAAIyE,kBAAgBzE,WAApB;AACA,IAAI0G,iBAAe1G,cAAnB;AACA,IAAI6C,iBAAe7C,YAAnB;AACA,IAAIsI,QAAQtI,OAAZ;AACA,SAASuI,cAAT,GAA0B;QAClB7F,SAAO3D,IAAP,CAAYyJ,cAAhB,EAAgC;YACxBC,MAAM,IAAI/F,SAAO3D,IAAP,CAAYyJ,cAAhB,EAAV;YACI,qBAAqBC,GAAzB,EAA8B;gBACtBC,eAAJ,GAAsB,CAAC,CAAC,KAAKA,eAA7B;;eAEGD,GAAP;KALJ,MAOK,IAAI,CAAC,CAAC/F,SAAO3D,IAAP,CAAY4J,cAAlB,EAAkC;eAC5B,IAAIjG,SAAO3D,IAAP,CAAY4J,cAAhB,EAAP;KADC,MAGA;cACK,IAAIxJ,KAAJ,CAAU,uCAAV,CAAN;;;AAGR,SAASyJ,iBAAT,GAA6B;QACrBlG,SAAO3D,IAAP,CAAYyJ,cAAhB,EAAgC;eACrB,IAAI9F,SAAO3D,IAAP,CAAYyJ,cAAhB,EAAP;KADJ,MAGK;YACGK,SAAS,KAAK,CAAlB;YACI;gBACIC,UAAU,CAAC,gBAAD,EAAmB,mBAAnB,EAAwC,oBAAxC,CAAd;iBACK,IAAI1B,IAAI,CAAb,EAAgBA,IAAI,CAApB,EAAuBA,GAAvB,EAA4B;oBACpB;6BACS0B,QAAQ1B,CAAR,CAAT;wBACI,IAAI1E,SAAO3D,IAAP,CAAYgK,aAAhB,CAA8BF,MAA9B,CAAJ,EAA2C;;;iBAF/C,CAMA,OAAO1D,CAAP,EAAU;;mBAGP,IAAIzC,SAAO3D,IAAP,CAAYgK,aAAhB,CAA8BF,MAA9B,CAAP;SAZJ,CAcA,OAAO1D,CAAP,EAAU;kBACA,IAAIhG,KAAJ,CAAU,iDAAV,CAAN;;;;AAIZ,SAAS6J,OAAT,CAAiBC,GAAjB,EAAsBC,OAAtB,EAA+B;QACvBA,YAAY,KAAK,CAArB,EAAwB;kBAAY,IAAV;;WACnB,IAAIC,cAAJ,CAAmB,EAAEC,QAAQ,KAAV,EAAiBH,KAAKA,GAAtB,EAA2BC,SAASA,OAApC,EAAnB,CAAP;;AAEJpK,gBAAkBkK,OAAlB;AACA;AACA,SAASK,QAAT,CAAkBJ,GAAlB,EAAuBK,IAAvB,EAA6BJ,OAA7B,EAAsC;WAC3B,IAAIC,cAAJ,CAAmB,EAAEC,QAAQ,MAAV,EAAkBH,KAAKA,GAAvB,EAA4BK,MAAMA,IAAlC,EAAwCJ,SAASA,OAAjD,EAAnB,CAAP;;AAEJpK,iBAAmBuK,QAAnB;AACA;AACA,SAASE,UAAT,CAAoBN,GAApB,EAAyBC,OAAzB,EAAkC;WACvB,IAAIC,cAAJ,CAAmB,EAAEC,QAAQ,QAAV,EAAoBH,KAAKA,GAAzB,EAA8BC,SAASA,OAAvC,EAAnB,CAAP;;AAEJpK,mBAAqByK,UAArB;AACA;AACA,SAASC,OAAT,CAAiBP,GAAjB,EAAsBK,IAAtB,EAA4BJ,OAA5B,EAAqC;WAC1B,IAAIC,cAAJ,CAAmB,EAAEC,QAAQ,KAAV,EAAiBH,KAAKA,GAAtB,EAA2BK,MAAMA,IAAjC,EAAuCJ,SAASA,OAAhD,EAAnB,CAAP;;AAEJpK,gBAAkB0K,OAAlB;AACA;AACA,SAASC,WAAT,CAAqBR,GAArB,EAA0BC,OAA1B,EAAmC;WACxB,IAAIC,cAAJ,CAAmB,EAAEC,QAAQ,KAAV,EAAiBH,KAAKA,GAAtB,EAA2BS,cAAc,MAAzC,EAAiDR,SAASA,OAA1D,EAAnB,EACFzF,IADE,CACG,IAAI6E,MAAMJ,WAAV,CAAsB,UAAUyB,CAAV,EAAatE,KAAb,EAAoB;eAASsE,EAAEC,QAAT;KAA5C,EAAkE,IAAlE,CADH,CAAP;;AAGJ9K,oBAAsB2K,WAAtB;AACA;;;;;;AAMA,IAAIN,iBAAkB,UAAU9I,MAAV,EAAkB;gBAC1B8I,cAAV,EAA0B9I,MAA1B;aACS8I,cAAT,CAAwBU,YAAxB,EAAsC;eAC3BpJ,IAAP,CAAY,IAAZ;YACIqJ,UAAU;mBACH,IADG;uBAEC,qBAAY;uBACZ,KAAKC,WAAL,GAAmBxB,eAAe9H,IAAf,CAAoB,IAApB,CAAnB,GAA+CmI,mBAAtD;aAHM;yBAKG,KALH;6BAMO,KANP;qBAOD,EAPC;oBAQF,KARE;0BASI,MATJ;qBAUD;SAVb;YAYI,OAAOiB,YAAP,KAAwB,QAA5B,EAAsC;oBAC1BZ,GAAR,GAAcY,YAAd;SADJ,MAGK;iBACI,IAAIG,OAAT,IAAiBH,YAAjB,EAA+B;oBACvBA,aAAapK,cAAb,CAA4BuK,OAA5B,CAAJ,EAAuC;4BAC3BA,OAAR,IAAgBH,aAAaG,OAAb,CAAhB;;;;aAIPF,OAAL,GAAeA,OAAf;;mBAEWlK,SAAf,CAAyB4D,UAAzB,GAAsC,UAAUlC,UAAV,EAAsB;eACjD,IAAI2I,cAAJ,CAAmB3I,UAAnB,EAA+B,KAAKwI,OAApC,CAAP;KADJ;;;;;;;;;;;;;;;;;;;;;;;;;;;mBA6BehK,MAAf,GAAyB,YAAY;YAC7BA,SAAS,SAATA,MAAS,CAAU+J,YAAV,EAAwB;mBAC1B,IAAIV,cAAJ,CAAmBU,YAAnB,CAAP;SADJ;eAGOK,GAAP,GAAalB,OAAb;eACOmB,IAAP,GAAcd,QAAd;eACOe,MAAP,GAAgBb,UAAhB;eACOc,GAAP,GAAab,OAAb;eACOc,OAAP,GAAiBb,WAAjB;eACO3J,MAAP;KAToB,EAAxB;WAWOqJ,cAAP;CApEkB,CAqEpBzC,eAAarD,UArEO,CAAtB;AAsEAvE,uBAAyBqK,cAAzB;;;;;;AAMA,IAAIc,iBAAkB,UAAU5J,MAAV,EAAkB;gBAC1B4J,cAAV,EAA0B5J,MAA1B;aACS4J,cAAT,CAAwBjJ,WAAxB,EAAqC8I,OAArC,EAA8C;eACnCrJ,IAAP,CAAY,IAAZ,EAAkBO,WAAlB;aACK8I,OAAL,GAAeA,OAAf;aACKS,IAAL,GAAY,KAAZ;YACIrB,UAAUY,QAAQZ,OAAR,GAAkBY,QAAQZ,OAAR,IAAmB,EAAnD;;YAEI,CAACY,QAAQC,WAAT,IAAwB,CAACb,QAAQ,kBAAR,CAA7B,EAA0D;oBAC9C,kBAAR,IAA8B,gBAA9B;;;YAGA,EAAE,kBAAkBA,OAApB,KAAgC,EAAExG,SAAO3D,IAAP,CAAYyL,QAAZ,IAAwBV,QAAQR,IAAR,YAAwB5G,SAAO3D,IAAP,CAAYyL,QAA9D,CAAhC,IAA2G,OAAOV,QAAQR,IAAf,KAAwB,WAAvI,EAAoJ;oBACxI,cAAR,IAA0B,kDAA1B;;;gBAGIA,IAAR,GAAe,KAAKmB,aAAL,CAAmBX,QAAQR,IAA3B,EAAiCQ,QAAQZ,OAAR,CAAgB,cAAhB,CAAjC,CAAf;aACKwB,IAAL;;mBAEW9K,SAAf,CAAyByB,IAAzB,GAAgC,UAAU8D,CAAV,EAAa;aACpCoF,IAAL,GAAY,IAAZ;YACI1F,KAAK,IAAT;YAAe4D,MAAM5D,GAAG4D,GAAxB;YAA6BqB,UAAUjF,GAAGiF,OAA1C;YAAmD9I,cAAc6D,GAAG7D,WAApE;YACI4I,WAAW,IAAIe,YAAJ,CAAiBxF,CAAjB,EAAoBsD,GAApB,EAAyBqB,OAAzB,CAAf;oBACYzI,IAAZ,CAAiBuI,QAAjB;KAJJ;mBAMehK,SAAf,CAAyB8K,IAAzB,GAAgC,YAAY;YACpC7F,KAAK,IAAT;YAAeiF,UAAUjF,GAAGiF,OAA5B;YAAqCc,KAAK/F,GAAGiF,OAA7C;YAAsDe,OAAOD,GAAGC,IAAhE;YAAsEzB,SAASwB,GAAGxB,MAAlF;YAA0FH,MAAM2B,GAAG3B,GAAnG;YAAwG6B,QAAQF,GAAGE,KAAnH;YAA0HC,WAAWH,GAAGG,QAAxI;YAAkJ7B,UAAU0B,GAAG1B,OAA/J;YAAwKI,OAAOsB,GAAGtB,IAAlL;YACI0B,YAAYlB,QAAQkB,SAAxB;YACIvC,MAAMjE,aAAWQ,QAAX,CAAoBgG,SAApB,EAA+BvK,IAA/B,CAAoCqJ,OAApC,CAAV;YACIrB,QAAQhE,gBAAcQ,WAA1B,EAAuC;iBAC9B1E,KAAL,CAAWkE,gBAAcQ,WAAd,CAA0BE,CAArC;SADJ,MAGK;iBACIsD,GAAL,GAAWA,GAAX;;gBAEIJ,SAAS,KAAK,CAAlB;gBACIwC,IAAJ,EAAU;yBACGrG,aAAWQ,QAAX,CAAoByD,IAAIwC,IAAxB,EAA8BxK,IAA9B,CAAmCgI,GAAnC,EAAwCW,MAAxC,EAAgDH,GAAhD,EAAqD6B,KAArD,EAA4DD,IAA5D,EAAkEE,QAAlE,CAAT;aADJ,MAGK;yBACQvG,aAAWQ,QAAX,CAAoByD,IAAIwC,IAAxB,EAA8BxK,IAA9B,CAAmCgI,GAAnC,EAAwCW,MAAxC,EAAgDH,GAAhD,EAAqD6B,KAArD,CAAT;;gBAEAzC,WAAW5D,gBAAcQ,WAA7B,EAA0C;qBACjC1E,KAAL,CAAWkE,gBAAcQ,WAAd,CAA0BE,CAArC;uBACO,IAAP;;;gBAGA+F,OAAJ,GAAcpB,QAAQoB,OAAtB;gBACIxB,YAAJ,GAAmBI,QAAQJ,YAA3B;;iBAEKyB,UAAL,CAAgB1C,GAAhB,EAAqBS,OAArB;;iBAEKkC,WAAL,CAAiB3C,GAAjB,EAAsBqB,OAAtB;;gBAEIR,IAAJ,EAAU;oBACFoB,IAAJ,CAASpB,IAAT;aADJ,MAGK;oBACGoB,IAAJ;;;eAGDjC,GAAP;KApCJ;mBAsCe7I,SAAf,CAAyB6K,aAAzB,GAAyC,UAAUnB,IAAV,EAAgB+B,WAAhB,EAA6B;YAC9D,CAAC/B,IAAD,IAAS,OAAOA,IAAP,KAAgB,QAA7B,EAAuC;mBAC5BA,IAAP;SADJ,MAGK,IAAI5G,SAAO3D,IAAP,CAAYyL,QAAZ,IAAwBlB,gBAAgB5G,SAAO3D,IAAP,CAAYyL,QAAxD,EAAkE;mBAC5DlB,IAAP;;YAEA+B,WAAJ,EAAiB;gBACTC,aAAaD,YAAYrF,OAAZ,CAAoB,GAApB,CAAjB;gBACIsF,eAAe,CAAC,CAApB,EAAuB;8BACLD,YAAYE,SAAZ,CAAsB,CAAtB,EAAyBD,UAAzB,CAAd;;;gBAGAD,WAAR;iBACS,mCAAL;uBACWxL,OAAO2L,IAAP,CAAYlC,IAAZ,EAAkBxB,GAAlB,CAAsB,UAAU2D,GAAV,EAAe;2BAAUC,UAAUD,GAAV,IAAiB,GAAjB,GAAuBC,UAAUpC,KAAKmC,GAAL,CAAV,CAA/B;iBAAvC,EAAgGE,IAAhG,CAAqG,GAArG,CAAP;iBACC,kBAAL;uBACWC,KAAKC,SAAL,CAAevC,IAAf,CAAP;;uBAEOA,IAAP;;KAnBZ;mBAsBe1J,SAAf,CAAyBuL,UAAzB,GAAsC,UAAU1C,GAAV,EAAeS,OAAf,EAAwB;aACrD,IAAIuC,GAAT,IAAgBvC,OAAhB,EAAyB;gBACjBA,QAAQzJ,cAAR,CAAuBgM,GAAvB,CAAJ,EAAiC;oBACzBK,gBAAJ,CAAqBL,GAArB,EAA0BvC,QAAQuC,GAAR,CAA1B;;;KAHZ;mBAOe7L,SAAf,CAAyBwL,WAAzB,GAAuC,UAAU3C,GAAV,EAAeqB,OAAf,EAAwB;YACvDiC,qBAAqBjC,QAAQiC,kBAAjC;iBACSC,UAAT,CAAoB7G,CAApB,EAAuB;gBACfN,KAAKmH,UAAT;gBAAqB1K,aAAauD,GAAGvD,UAArC;gBAAiDyK,qBAAqBlH,GAAGkH,kBAAzE;gBAA6FjC,UAAUjF,GAAGiF,OAA1G;gBACIiC,kBAAJ,EAAwB;mCACDxL,KAAnB,CAAyB4E,CAAzB;;uBAEO5E,KAAX,CAAiB,IAAI0L,gBAAJ,CAAqB,IAArB,EAA2BnC,OAA3B,CAAjB,EALmB;;;YAQnBoC,SAAJ,GAAgBF,UAAhB;mBACWlC,OAAX,GAAqBA,OAArB;mBACWxI,UAAX,GAAwB,IAAxB;mBACWyK,kBAAX,GAAgCA,kBAAhC;YACItD,IAAI0D,MAAJ,IAAc,qBAAqB1D,GAAnC,IAA0C/F,SAAO3D,IAAP,CAAY4J,cAA1D,EAA0E;gBAClEoD,kBAAJ,EAAwB;oBAChBK,aAAJ;gCACgB,uBAAUjH,CAAV,EAAa;wBACrB4G,qBAAqBK,cAAcL,kBAAvC;uCACmB1K,IAAnB,CAAwB8D,CAAxB;iBAFJ;oBAIIkH,UAAJ,GAAiBD,aAAjB;8BACcL,kBAAd,GAAmCA,kBAAnC;;gBAEAO,UAAJ;yBACa,oBAAUnH,CAAV,EAAa;oBAClBN,KAAKyH,UAAT;oBAAqBP,qBAAqBlH,GAAGkH,kBAA7C;oBAAiEzK,aAAauD,GAAGvD,UAAjF;oBAA6FwI,UAAUjF,GAAGiF,OAA1G;oBACIiC,kBAAJ,EAAwB;uCACDxL,KAAnB,CAAyB4E,CAAzB;;2BAEO5E,KAAX,CAAiB,IAAIgM,SAAJ,CAAc,YAAd,EAA4B,IAA5B,EAAkCzC,OAAlC,CAAjB;aALJ;gBAOI0C,OAAJ,GAAcF,UAAd;uBACWxC,OAAX,GAAqBA,OAArB;uBACWxI,UAAX,GAAwB,IAAxB;uBACWyK,kBAAX,GAAgCA,kBAAhC;;iBAEKU,mBAAT,CAA6BtH,CAA7B,EAAgC;gBACxBN,KAAK4H,mBAAT;gBAA8BnL,aAAauD,GAAGvD,UAA9C;gBAA0DyK,qBAAqBlH,GAAGkH,kBAAlF;gBAAsGjC,UAAUjF,GAAGiF,OAAnH;gBACI,KAAK4C,UAAL,KAAoB,CAAxB,EAA2B;;oBAEnBC,WAAW,KAAKC,MAAL,KAAgB,IAAhB,GAAuB,GAAvB,GAA6B,KAAKA,MAAjD;oBACIhD,WAAY,KAAKF,YAAL,KAAsB,MAAtB,GAAgC,KAAKE,QAAL,IAAiB,KAAKiD,YAAtD,GAAsE,KAAKjD,QAA3F;;;;oBAII+C,aAAa,CAAjB,EAAoB;+BACL/C,WAAW,GAAX,GAAiB,CAA5B;;oBAEA,OAAO+C,QAAP,IAAmBA,WAAW,GAAlC,EAAuC;wBAC/BZ,kBAAJ,EAAwB;2CACDvL,QAAnB;;+BAEOa,IAAX,CAAgB8D,CAAhB;+BACW3E,QAAX;iBALJ,MAOK;wBACGuL,kBAAJ,EAAwB;2CACDxL,KAAnB,CAAyB4E,CAAzB;;+BAEO5E,KAAX,CAAiB,IAAIgM,SAAJ,CAAc,gBAAgBI,QAA9B,EAAwC,IAAxC,EAA8C7C,OAA9C,CAAjB;;;;;YAKRgD,kBAAJ,GAAyBL,mBAAzB;4BACoBnL,UAApB,GAAiC,IAAjC;4BACoByK,kBAApB,GAAyCA,kBAAzC;4BACoBjC,OAApB,GAA8BA,OAA9B;KApEJ;mBAsEelK,SAAf,CAAyBgC,WAAzB,GAAuC,YAAY;YAC3CiD,KAAK,IAAT;YAAe0F,OAAO1F,GAAG0F,IAAzB;YAA+B9B,MAAM5D,GAAG4D,GAAxC;YACI,CAAC8B,IAAD,IAAS9B,GAAT,IAAgBA,IAAIiE,UAAJ,KAAmB,CAAnC,IAAwC,OAAOjE,IAAIsE,KAAX,KAAqB,UAAjE,EAA6E;gBACrEA,KAAJ;;eAEGnN,SAAP,CAAiBgC,WAAjB,CAA6BnB,IAA7B,CAAkC,IAAlC;KALJ;WAOOwJ,cAAP;CAzKkB,CA0KpBpH,eAAazC,UA1KO,CAAtB;AA2KAtB,uBAAyBmL,cAAzB;;;;;;;;AAQA,IAAIU,eAAgB,YAAY;aACnBA,YAAT,CAAsBqC,aAAtB,EAAqCvE,GAArC,EAA0CqB,OAA1C,EAAmD;aAC1CkD,aAAL,GAAqBA,aAArB;aACKvE,GAAL,GAAWA,GAAX;aACKqB,OAAL,GAAeA,OAAf;aACK8C,MAAL,GAAcnE,IAAImE,MAAlB;aACKlD,YAAL,GAAoBjB,IAAIiB,YAAJ,IAAoBI,QAAQJ,YAAhD;gBACQ,KAAKA,YAAb;iBACS,MAAL;oBACQ,cAAcjB,GAAlB,EAAuB;;yBAEdmB,QAAL,GAAgBnB,IAAIiB,YAAJ,GAAmBjB,IAAImB,QAAvB,GAAkCgC,KAAKqB,KAAL,CAAWxE,IAAImB,QAAJ,IAAgBnB,IAAIoE,YAApB,IAAoC,MAA/C,CAAlD;iBAFJ,MAIK;yBACIjD,QAAL,GAAgBgC,KAAKqB,KAAL,CAAWxE,IAAIoE,YAAJ,IAAoB,MAA/B,CAAhB;;;iBAGH,KAAL;qBACSjD,QAAL,GAAgBnB,IAAIyE,WAApB;;iBAEC,MAAL;;qBAEStD,QAAL,GAAiB,cAAcnB,GAAf,GAAsBA,IAAImB,QAA1B,GAAqCnB,IAAIoE,YAAzD;;;;WAILlC,YAAP;CA1BgB,EAApB;AA4BA7L,qBAAuB6L,YAAvB;;;;;;;;AAQA,IAAI4B,YAAa,UAAUlM,MAAV,EAAkB;gBACrBkM,SAAV,EAAqBlM,MAArB;aACSkM,SAAT,CAAmBlG,OAAnB,EAA4BoC,GAA5B,EAAiCqB,OAAjC,EAA0C;eAC/BrJ,IAAP,CAAY,IAAZ,EAAkB4F,OAAlB;aACKA,OAAL,GAAeA,OAAf;aACKoC,GAAL,GAAWA,GAAX;aACKqB,OAAL,GAAeA,OAAf;aACK8C,MAAL,GAAcnE,IAAImE,MAAlB;;WAEGL,SAAP;CATa,CAUfpN,KAVe,CAAjB;AAWAL,kBAAoByN,SAApB;;;;;;AAMA,IAAIN,mBAAoB,UAAU5L,MAAV,EAAkB;gBAC5B4L,gBAAV,EAA4B5L,MAA5B;aACS4L,gBAAT,CAA0BxD,GAA1B,EAA+BqB,OAA/B,EAAwC;eAC7BrJ,IAAP,CAAY,IAAZ,EAAkB,cAAlB,EAAkCgI,GAAlC,EAAuCqB,OAAvC;;WAEGmC,gBAAP;CALoB,CAMtBM,SANsB,CAAxB;AAOAzN,yBAA2BmN,gBAA3B;;;;;;;;;;;;;;;AC9YA,IAAIkB,mBAAmBnN,kBAAvB;AACAlB,aAAeqO,iBAAiBhE,cAAjB,CAAgCrJ,MAA/C;;ACDA,IAAIV,cAAaC,kBAAQA,eAAKD,SAAd,IAA4B,UAAUE,CAAV,EAAaC,CAAb,EAAgB;SACnD,IAAIC,CAAT,IAAcD,CAAd;YAAqBA,EAAEE,cAAF,CAAiBD,CAAjB,CAAJ,EAAyBF,EAAEE,CAAF,IAAOD,EAAEC,CAAF,CAAP;KAC1C,SAASE,EAAT,GAAc;aAAOC,WAAL,GAAmBL,CAAnB;;MACdM,SAAF,GAAcL,MAAM,IAAN,GAAaM,OAAOC,MAAP,CAAcP,CAAd,CAAb,IAAiCG,GAAGE,SAAH,GAAeL,EAAEK,SAAjB,EAA4B,IAAIF,EAAJ,EAA7D,CAAd;CAHJ;AAKA,IAAIgH,iBAAe1G,cAAnB;;;;;;AAMA,IAAIoN,kBAAmB,UAAU/M,MAAV,EAAkB;gBAC3B+M,eAAV,EAA2B/M,MAA3B;aACS+M,eAAT,CAAyBC,SAAzB,EAAoC;eACzB5M,IAAP,CAAY,IAAZ;aACK4M,SAAL,GAAiBA,SAAjB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;oBAuCYvN,MAAhB,GAAyB,UAAUuN,SAAV,EAAqB;eACnC,IAAID,eAAJ,CAAoBC,SAApB,CAAP;KADJ;oBAGgBC,QAAhB,GAA2B,UAAUC,GAAV,EAAe;YAClCjM,aAAaiM,IAAIjM,UAArB;mBACWd,QAAX;KAFJ;oBAIgBZ,SAAhB,CAA0B4D,UAA1B,GAAuC,UAAUlC,UAAV,EAAsB;YACrD+L,YAAY,KAAKA,SAArB;YACIA,SAAJ,EAAe;mBACJA,UAAUG,QAAV,CAAmBJ,gBAAgBE,QAAnC,EAA6C,CAA7C,EAAgD,EAAEhM,YAAYA,UAAd,EAAhD,CAAP;SADJ,MAGK;uBACUd,QAAX;;KANR;WASO4M,eAAP;CA3DmB,CA4DrB1G,eAAarD,UA5DQ,CAAvB;AA6DAvE,wBAA0BsO,eAA1B;;;;;;ACxEA,IAAIK,oBAAoBzN,mBAAxB;AACAlB,gBAAgB2O,kBAAkBL,eAAlB,CAAkCtN,MAAlD;;;;;;ACDA,IAAI4G,iBAAe1G,cAAnB;AACA,IAAI0N,UAAU1N,OAAd;AACA0G,eAAarD,UAAb,CAAwBpC,KAAxB,GAAgCyM,QAAQzM,KAAxC;;ACFA,IAAI7B,cAAaC,kBAAQA,eAAKD,SAAd,IAA4B,UAAUE,CAAV,EAAaC,CAAb,EAAgB;SACnD,IAAIC,CAAT,IAAcD,CAAd;YAAqBA,EAAEE,cAAF,CAAiBD,CAAjB,CAAJ,EAAyBF,EAAEE,CAAF,IAAOD,EAAEC,CAAF,CAAP;KAC1C,SAASE,EAAT,GAAc;aAAOC,WAAL,GAAmBL,CAAnB;;MACdM,SAAF,GAAcL,MAAM,IAAN,GAAaM,OAAOC,MAAP,CAAcP,CAAd,CAAb,IAAiCG,GAAGE,SAAH,GAAeL,EAAEK,SAAjB,EAA4B,IAAIF,EAAJ,EAA7D,CAAd;CAHJ;AAKA,IAAImD,iBAAe7C,YAAnB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0CA,SAAS2N,QAAT,CAAgBC,SAAhB,EAA2B5F,OAA3B,EAAoC;WACzB,KAAKvE,IAAL,CAAU,IAAIoK,cAAJ,CAAmBD,SAAnB,EAA8B5F,OAA9B,CAAV,CAAP;;AAEJlJ,eAAiB6O,QAAjB;AACA,IAAIE,iBAAkB,YAAY;aACrBA,cAAT,CAAwBD,SAAxB,EAAmC5F,OAAnC,EAA4C;aACnC4F,SAAL,GAAiBA,SAAjB;aACK5F,OAAL,GAAeA,OAAf;;mBAEWpI,SAAf,CAAyBa,IAAzB,GAAgC,UAAUa,UAAV,EAAsBqC,MAAtB,EAA8B;eACnDA,OAAOH,UAAP,CAAkB,IAAIsK,gBAAJ,CAAqBxM,UAArB,EAAiC,KAAKsM,SAAtC,EAAiD,KAAK5F,OAAtD,CAAlB,CAAP;KADJ;WAGO6F,cAAP;CARkB,EAAtB;;;;;;AAeA,IAAIC,mBAAoB,UAAUzN,MAAV,EAAkB;gBAC5ByN,gBAAV,EAA4BzN,MAA5B;aACSyN,gBAAT,CAA0B9M,WAA1B,EAAuC4M,SAAvC,EAAkD5F,OAAlD,EAA2D;eAChDvH,IAAP,CAAY,IAAZ,EAAkBO,WAAlB;aACK4M,SAAL,GAAiBA,SAAjB;aACK5F,OAAL,GAAeA,OAAf;aACKI,KAAL,GAAa,CAAb;aACKwF,SAAL,GAAiBA,SAAjB;;;;qBAIahO,SAAjB,CAA2B4B,KAA3B,GAAmC,UAAUD,KAAV,EAAiB;YAC5C8G,MAAJ;YACI;qBACS,KAAKuF,SAAL,CAAenN,IAAf,CAAoB,KAAKuH,OAAzB,EAAkCzG,KAAlC,EAAyC,KAAK6G,KAAL,EAAzC,CAAT;SADJ,CAGA,OAAO3G,GAAP,EAAY;iBACHT,WAAL,CAAiBT,KAAjB,CAAuBkB,GAAvB;;;YAGA4G,MAAJ,EAAY;iBACHrH,WAAL,CAAiBK,IAAjB,CAAsBE,KAAtB;;KAVR;WAaOuM,gBAAP;CAxBoB,CAyBtBjL,eAAazC,UAzBS,CAAxB;;;;;;AClEA,IAAIsG,iBAAe1G,cAAnB;AACA,IAAI+N,WAAW/N,UAAf;AACA0G,eAAarD,UAAb,CAAwBzD,SAAxB,CAAkC+N,MAAlC,GAA2CI,SAASJ,MAApD;;ACFA,IAAIjH,iBAAe1G,cAAnB;AACA,IAAIsI,UAAQtI,OAAZ;AACA0G,eAAarD,UAAb,CAAwBzD,SAAxB,CAAkCkI,GAAlC,GAAwCQ,QAAMR,GAA9C;;ACFA,IAAI1I,eAAaC,kBAAQA,eAAKD,SAAd,IAA4B,UAAUE,CAAV,EAAaC,CAAb,EAAgB;SACnD,IAAIC,CAAT,IAAcD,CAAd;YAAqBA,EAAEE,cAAF,CAAiBD,CAAjB,CAAJ,EAAyBF,EAAEE,CAAF,IAAOD,EAAEC,CAAF,CAAP;KAC1C,SAASE,EAAT,GAAc;aAAOC,WAAL,GAAmBL,CAAnB;;MACdM,SAAF,GAAcL,MAAM,IAAN,GAAaM,OAAOC,MAAP,CAAcP,CAAd,CAAb,IAAiCG,GAAGE,SAAH,GAAeL,EAAEK,SAAjB,EAA4B,IAAIF,EAAJ,EAA7D,CAAd;CAHJ;AAKA,IAAImD,iBAAe7C,YAAnB;;;;;;AAMA,IAAIgO,kBAAmB,UAAU3N,MAAV,EAAkB;iBAC3B2N,eAAV,EAA2B3N,MAA3B;aACS2N,eAAT,GAA2B;eAChBnG,KAAP,CAAa,IAAb,EAAmB/G,SAAnB;;oBAEYlB,SAAhB,CAA0BqO,UAA1B,GAAuC,UAAUC,UAAV,EAAsBC,UAAtB,EAAkCC,UAAlC,EAA8CC,UAA9C,EAA0DC,QAA1D,EAAoE;aAClGtN,WAAL,CAAiBK,IAAjB,CAAsB8M,UAAtB;KADJ;oBAGgBvO,SAAhB,CAA0B2O,WAA1B,GAAwC,UAAUhO,KAAV,EAAiB+N,QAAjB,EAA2B;aAC1DtN,WAAL,CAAiBT,KAAjB,CAAuBA,KAAvB;KADJ;oBAGgBX,SAAhB,CAA0B4O,cAA1B,GAA2C,UAAUF,QAAV,EAAoB;aACtDtN,WAAL,CAAiBR,QAAjB;KADJ;WAGOwN,eAAP;CAdmB,CAerBnL,eAAazC,UAfQ,CAAvB;AAgBAtB,wBAA0BkP,eAA1B;;;;;;AC3BAlP,kBAAkB2P,MAAMrJ,OAAN,IAAkB,UAAUuE,CAAV,EAAa;SAASA,KAAK,OAAOA,EAAE5I,MAAT,KAAoB,QAAhC;CAAnD;;;;;;ACAA,SAAS2N,SAAT,CAAmBnN,KAAnB,EAA0B;WACfA,SAAS,OAAOA,MAAM+B,SAAb,KAA2B,UAApC,IAAkD,OAAO/B,MAAMoN,IAAb,KAAsB,UAA/E;;AAEJ7P,kBAAoB4P,SAApB;;;;;;ACHA,IAAIhM,WAAS1C,UAAb;AACA,SAAS4O,sBAAT,CAAgC7P,IAAhC,EAAsC;QAC9B4D,UAAS5D,KAAK4D,MAAlB;QACI,OAAOA,OAAP,KAAkB,UAAtB,EAAkC;YAC1B,CAACA,QAAOkM,QAAZ,EAAsB;oBACXA,QAAP,GAAkBlM,QAAO,mBAAP,CAAlB;;eAEGA,QAAOkM,QAAd;KAJJ,MAMK;;YAEGC,QAAQ/P,KAAKgQ,GAAjB;YACID,SAAS,OAAO,IAAIA,KAAJ,GAAY,YAAZ,CAAP,KAAqC,UAAlD,EAA8D;mBACnD,YAAP;;YAEAE,QAAQjQ,KAAKkQ,GAAjB;;YAEID,KAAJ,EAAW;gBACHxD,OAAO3L,OAAOqP,mBAAP,CAA2BF,MAAMpP,SAAjC,CAAX;iBACK,IAAIwH,IAAI,CAAb,EAAgBA,IAAIoE,KAAKzK,MAAzB,EAAiC,EAAEqG,CAAnC,EAAsC;oBAC9BqE,MAAMD,KAAKpE,CAAL,CAAV;;oBAEIqE,QAAQ,SAAR,IAAqBA,QAAQ,MAA7B,IAAuCuD,MAAMpP,SAAN,CAAgB6L,GAAhB,MAAyBuD,MAAMpP,SAAN,CAAgB,SAAhB,CAApE,EAAgG;2BACrF6L,GAAP;;;;eAIL,YAAP;;;AAGR3M,+BAAiC8P,sBAAjC;AACA9P,iBAAqB8P,uBAAuBlM,SAAO3D,IAA9B,CAArB;;;;;;;AC/BA,IAAIK,eAAaC,kBAAQA,eAAKD,SAAd,IAA4B,UAAUE,CAAV,EAAaC,CAAb,EAAgB;SACnD,IAAIC,CAAT,IAAcD,CAAd;YAAqBA,EAAEE,cAAF,CAAiBD,CAAjB,CAAJ,EAAyBF,EAAEE,CAAF,IAAOD,EAAEC,CAAF,CAAP;KAC1C,SAASE,EAAT,GAAc;aAAOC,WAAL,GAAmBL,CAAnB;;MACdM,SAAF,GAAcL,MAAM,IAAN,GAAaM,OAAOC,MAAP,CAAcP,CAAd,CAAb,IAAiCG,GAAGE,SAAH,GAAeL,EAAEK,SAAjB,EAA4B,IAAIF,EAAJ,EAA7D,CAAd;CAHJ;AAKA,IAAImD,iBAAe7C,YAAnB;;;;;;AAMA,IAAImP,kBAAmB,UAAU9O,MAAV,EAAkB;iBAC3B8O,eAAV,EAA2B9O,MAA3B;aACS8O,eAAT,CAAyB3M,MAAzB,EAAiC0L,UAAjC,EAA6CE,UAA7C,EAAyD;eAC9C3N,IAAP,CAAY,IAAZ;aACK+B,MAAL,GAAcA,MAAd;aACK0L,UAAL,GAAkBA,UAAlB;aACKE,UAAL,GAAkBA,UAAlB;aACK/I,KAAL,GAAa,CAAb;;oBAEYzF,SAAhB,CAA0B4B,KAA1B,GAAkC,UAAUD,KAAV,EAAiB;aAC1CiB,MAAL,CAAYyL,UAAZ,CAAuB,KAAKC,UAA5B,EAAwC3M,KAAxC,EAA+C,KAAK6M,UAApD,EAAgE,KAAK/I,KAAL,EAAhE,EAA8E,IAA9E;KADJ;oBAGgBzF,SAAhB,CAA0B8B,MAA1B,GAAmC,UAAUnB,KAAV,EAAiB;aAC3CiC,MAAL,CAAY+L,WAAZ,CAAwBhO,KAAxB,EAA+B,IAA/B;aACKqB,WAAL;KAFJ;oBAIgBhC,SAAhB,CAA0B+B,SAA1B,GAAsC,YAAY;aACzCa,MAAL,CAAYgM,cAAZ,CAA2B,IAA3B;aACK5M,WAAL;KAFJ;WAIOuN,eAAP;CApBmB,CAqBrBtM,eAAazC,UArBQ,CAAvB;AAsBAtB,wBAA0BqQ,eAA1B;;;;;;ACjCA,IAAIzM,WAAS1C,UAAb;AACA,IAAIsE,cAAYtE,OAAhB;AACA,IAAIoP,cAAcpP,aAAlB;AACA,IAAI0G,iBAAe1G,cAAnB;AACA,IAAIqP,aAAarP,QAAjB;AACA,IAAIsP,oBAAoBtP,mBAAxB;AACA,IAAIoD,iBAAepD,UAAnB;AACA,SAASuP,iBAAT,CAA2BC,eAA3B,EAA4CnH,MAA5C,EAAoD6F,UAApD,EAAgEE,UAAhE,EAA4E;QACpEpN,cAAc,IAAIsO,kBAAkBH,eAAtB,CAAsCK,eAAtC,EAAuDtB,UAAvD,EAAmEE,UAAnE,CAAlB;QACIpN,YAAYa,MAAhB,EAAwB;eACb,IAAP;;QAEAwG,kBAAkB3B,eAAarD,UAAnC,EAA+C;YACvCgF,OAAO9E,SAAX,EAAsB;wBACNlC,IAAZ,CAAiBgH,OAAO9G,KAAxB;wBACYf,QAAZ;mBACO,IAAP;SAHJ,MAKK;mBACM6H,OAAO/E,SAAP,CAAiBtC,WAAjB,CAAP;;;QAGJsD,YAAUc,OAAV,CAAkBiD,MAAlB,CAAJ,EAA+B;aACtB,IAAIjB,IAAI,CAAR,EAAW9B,MAAM+C,OAAOtH,MAA7B,EAAqCqG,IAAI9B,GAAJ,IAAW,CAACtE,YAAYa,MAA7D,EAAqEuF,GAArE,EAA0E;wBAC1D/F,IAAZ,CAAiBgH,OAAOjB,CAAP,CAAjB;;YAEA,CAACpG,YAAYa,MAAjB,EAAyB;wBACTrB,QAAZ;;KALR,MAQK,IAAI4O,YAAYV,SAAZ,CAAsBrG,MAAtB,CAAJ,EAAmC;eAC7BsG,IAAP,CAAY,UAAUpN,KAAV,EAAiB;gBACrB,CAACP,YAAYa,MAAjB,EAAyB;4BACTR,IAAZ,CAAiBE,KAAjB;4BACYf,QAAZ;;SAHR,EAKG,UAAUiB,GAAV,EAAe;mBAAST,YAAYT,KAAZ,CAAkBkB,GAAlB,CAAP;SALpB,EAMKkN,IANL,CAMU,IANV,EAMgB,UAAUlN,GAAV,EAAe;;qBAEpB1C,IAAP,CAAY0Q,UAAZ,CAAuB,YAAY;sBAAQhO,GAAN;aAArC;SARJ;eAUOT,WAAP;KAXC,MAaA,IAAI,OAAOqH,OAAOgH,WAAWK,UAAlB,CAAP,KAAyC,UAA7C,EAAyD;YACtDb,cAAWxG,OAAOgH,WAAWK,UAAlB,GAAf;WACG;gBACKC,OAAOd,YAASxN,IAAT,EAAX;gBACIsO,KAAKpF,IAAT,EAAe;4BACC/J,QAAZ;;;wBAGQa,IAAZ,CAAiBsO,KAAKpO,KAAtB;gBACIP,YAAYa,MAAhB,EAAwB;;;SAP5B,QAUS,IAVT;KAFC,MAcA,IAAI,OAAOwG,OAAOjF,eAAaH,YAApB,CAAP,KAA6C,UAAjD,EAA6D;YAC1D2M,MAAMvH,OAAOjF,eAAaH,YAApB,GAAV;YACI,OAAO2M,IAAItM,SAAX,KAAyB,UAA7B,EAAyC;wBACzB/C,KAAZ,CAAkB,IAAIpB,KAAJ,CAAU,oBAAV,CAAlB;SADJ,MAGK;mBACMyQ,IAAItM,SAAJ,CAAc,IAAIgM,kBAAkBH,eAAtB,CAAsCK,eAAtC,EAAuDtB,UAAvD,EAAmEE,UAAnE,CAAd,CAAP;;KANH,MASA;oBACW7N,KAAZ,CAAkB,IAAI0H,SAAJ,CAAc,uBAAd,CAAlB;;WAEG,IAAP;;AAEJnJ,0BAA4ByQ,iBAA5B;;;;;;ACvEA,IAAInQ,cAAaC,kBAAQA,eAAKD,SAAd,IAA4B,UAAUE,CAAV,EAAaC,CAAb,EAAgB;SACnD,IAAIC,CAAT,IAAcD,CAAd;YAAqBA,EAAEE,cAAF,CAAiBD,CAAjB,CAAJ,EAAyBF,EAAEE,CAAF,IAAOD,EAAEC,CAAF,CAAP;KAC1C,SAASE,EAAT,GAAc;aAAOC,WAAL,GAAmBL,CAAnB;;MACdM,SAAF,GAAcL,MAAM,IAAN,GAAaM,OAAOC,MAAP,CAAcP,CAAd,CAAb,IAAiCG,GAAGE,SAAH,GAAeL,EAAEK,SAAjB,EAA4B,IAAIF,EAAJ,EAA7D,CAAd;CAHJ;AAKA,IAAImQ,oBAAoB7P,mBAAxB;AACA,IAAI8P,sBAAsB9P,qBAA1B;;;;;;;;;;;;AAYA,SAAS+P,QAAT,CAAgBC,QAAhB,EAA0B;QAClBtM,WAAW,IAAIuM,aAAJ,CAAkBD,QAAlB,CAAf;QACIE,SAAS,KAAKzM,IAAL,CAAUC,QAAV,CAAb;WACQA,SAASwM,MAAT,GAAkBA,MAA1B;;AAEJpR,eAAiBiR,QAAjB;AACA,IAAIE,gBAAiB,YAAY;aACpBA,aAAT,CAAuBD,QAAvB,EAAiC;aACxBA,QAAL,GAAgBA,QAAhB;;kBAEUpQ,SAAd,CAAwBa,IAAxB,GAA+B,UAAUa,UAAV,EAAsBqC,MAAtB,EAA8B;eAClDA,OAAOH,UAAP,CAAkB,IAAI2M,eAAJ,CAAoB7O,UAApB,EAAgC,KAAK0O,QAArC,EAA+C,KAAKE,MAApD,CAAlB,CAAP;KADJ;WAGOD,aAAP;CAPiB,EAArB;;;;;;AAcA,IAAIE,kBAAmB,UAAU9P,MAAV,EAAkB;gBAC3B8P,eAAV,EAA2B9P,MAA3B;aACS8P,eAAT,CAAyBnP,WAAzB,EAAsCgP,QAAtC,EAAgDE,MAAhD,EAAwD;eAC7CzP,IAAP,CAAY,IAAZ,EAAkBO,WAAlB;aACKgP,QAAL,GAAgBA,QAAhB;aACKE,MAAL,GAAcA,MAAd;;;;oBAIYtQ,SAAhB,CAA0BW,KAA1B,GAAkC,UAAUkB,GAAV,EAAe;YACzC,CAAC,KAAKZ,SAAV,EAAqB;gBACbwH,SAAS,KAAK,CAAlB;gBACI;yBACS,KAAK2H,QAAL,CAAcvO,GAAd,EAAmB,KAAKyO,MAAxB,CAAT;aADJ,CAGA,OAAOzO,GAAP,EAAY;qBACHT,WAAL,CAAiBT,KAAjB,CAAuBkB,GAAvB;;;iBAGCG,WAAL;iBACKZ,WAAL,CAAiB6E,MAAjB,CAAwB,IAAxB;gCACoB0J,iBAApB,CAAsC,IAAtC,EAA4ClH,MAA5C;;KAZR;WAeO8H,eAAP;CAxBmB,CAyBrBN,kBAAkB7B,eAzBG,CAAvB;;;;;;ACtCA,IAAItH,iBAAe1G,cAAnB;AACA,IAAIoQ,UAAUpQ,QAAd;AACA0G,eAAarD,UAAb,CAAwBzD,SAAxB,CAAkCyQ,KAAlC,GAA0CD,QAAQL,MAAlD;AACArJ,eAAarD,UAAb,CAAwBzD,SAAxB,CAAkCmQ,MAAlC,GAA2CK,QAAQL,MAAnD;;ACHA,IAAI3Q,eAAaC,kBAAQA,eAAKD,SAAd,IAA4B,UAAUE,CAAV,EAAaC,CAAb,EAAgB;SACnD,IAAIC,CAAT,IAAcD,CAAd;YAAqBA,EAAEE,cAAF,CAAiBD,CAAjB,CAAJ,EAAyBF,EAAEE,CAAF,IAAOD,EAAEC,CAAF,CAAP;KAC1C,SAASE,EAAT,GAAc;aAAOC,WAAL,GAAmBL,CAAnB;;MACdM,SAAF,GAAcL,MAAM,IAAN,GAAaM,OAAOC,MAAP,CAAcP,CAAd,CAAb,IAAiCG,GAAGE,SAAH,GAAeL,EAAEK,SAAjB,EAA4B,IAAIF,EAAJ,EAA7D,CAAd;CAHJ;AAKA,IAAImQ,sBAAoB7P,mBAAxB;AACA,IAAI8P,wBAAsB9P,qBAA1B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiDA,SAASsQ,WAAT,CAAmBvI,OAAnB,EAA4BwI,cAA5B,EAA4C;WACjC,KAAK9M,IAAL,CAAU,IAAI+M,iBAAJ,CAAsBzI,OAAtB,EAA+BwI,cAA/B,CAAV,CAAP;;AAEJzR,kBAAoBwR,WAApB;AACA,IAAIE,oBAAqB,YAAY;aACxBA,iBAAT,CAA2BzI,OAA3B,EAAoCwI,cAApC,EAAoD;aAC3CxI,OAAL,GAAeA,OAAf;aACKwI,cAAL,GAAsBA,cAAtB;;sBAEc3Q,SAAlB,CAA4Ba,IAA5B,GAAmC,UAAUa,UAAV,EAAsBqC,MAAtB,EAA8B;eACtDA,OAAOH,UAAP,CAAkB,IAAIiN,mBAAJ,CAAwBnP,UAAxB,EAAoC,KAAKyG,OAAzC,EAAkD,KAAKwI,cAAvD,CAAlB,CAAP;KADJ;WAGOC,iBAAP;CARqB,EAAzB;;;;;;AAeA,IAAIC,sBAAuB,UAAUpQ,MAAV,EAAkB;iBAC/BoQ,mBAAV,EAA+BpQ,MAA/B;aACSoQ,mBAAT,CAA6BzP,WAA7B,EAA0C+G,OAA1C,EAAmDwI,cAAnD,EAAmE;eACxD9P,IAAP,CAAY,IAAZ,EAAkBO,WAAlB;aACK+G,OAAL,GAAeA,OAAf;aACKwI,cAAL,GAAsBA,cAAtB;aACKlL,KAAL,GAAa,CAAb;;wBAEgBzF,SAApB,CAA8B4B,KAA9B,GAAsC,UAAUD,KAAV,EAAiB;YAC/C8G,MAAJ;YACIhD,QAAQ,KAAKA,KAAL,EAAZ;YACI;qBACS,KAAK0C,OAAL,CAAaxG,KAAb,EAAoB8D,KAApB,CAAT;SADJ,CAGA,OAAO9E,KAAP,EAAc;iBACLS,WAAL,CAAiBT,KAAjB,CAAuBA,KAAvB;;;aAGCmQ,SAAL,CAAerI,MAAf,EAAuB9G,KAAvB,EAA8B8D,KAA9B;KAVJ;wBAYoBzF,SAApB,CAA8B8Q,SAA9B,GAA0C,UAAUrI,MAAV,EAAkB9G,KAAlB,EAAyB8D,KAAzB,EAAgC;YAClEsL,oBAAoB,KAAKA,iBAA7B;YACIA,iBAAJ,EAAuB;8BACD/O,WAAlB;;aAECV,GAAL,CAAS,KAAKyP,iBAAL,GAAyBb,sBAAoBP,iBAApB,CAAsC,IAAtC,EAA4ClH,MAA5C,EAAoD9G,KAApD,EAA2D8D,KAA3D,CAAlC;KALJ;wBAOoBzF,SAApB,CAA8B+B,SAA9B,GAA0C,YAAY;YAC9CgP,oBAAoB,KAAKA,iBAA7B;YACI,CAACA,iBAAD,IAAsBA,kBAAkB9O,MAA5C,EAAoD;mBACzCjC,SAAP,CAAiB+B,SAAjB,CAA2BlB,IAA3B,CAAgC,IAAhC;;KAHR;wBAMoBb,SAApB,CAA8B6C,YAA9B,GAA6C,YAAY;aAChDkO,iBAAL,GAAyB,IAAzB;KADJ;wBAGoB/Q,SAApB,CAA8B4O,cAA9B,GAA+C,UAAUF,QAAV,EAAoB;aAC1DzI,MAAL,CAAYyI,QAAZ;aACKqC,iBAAL,GAAyB,IAAzB;YACI,KAAK9P,SAAT,EAAoB;mBACTjB,SAAP,CAAiB+B,SAAjB,CAA2BlB,IAA3B,CAAgC,IAAhC;;KAJR;wBAOoBb,SAApB,CAA8BqO,UAA9B,GAA2C,UAAUC,UAAV,EAAsBC,UAAtB,EAAkCC,UAAlC,EAA8CC,UAA9C,EAA0DC,QAA1D,EAAoE;YACvG,KAAKiC,cAAT,EAAyB;iBAChBK,cAAL,CAAoB1C,UAApB,EAAgCC,UAAhC,EAA4CC,UAA5C,EAAwDC,UAAxD;SADJ,MAGK;iBACIrN,WAAL,CAAiBK,IAAjB,CAAsB8M,UAAtB;;KALR;wBAQoBvO,SAApB,CAA8BgR,cAA9B,GAA+C,UAAU1C,UAAV,EAAsBC,UAAtB,EAAkCC,UAAlC,EAA8CC,UAA9C,EAA0D;YACjGhG,MAAJ;YACI;qBACS,KAAKkI,cAAL,CAAoBrC,UAApB,EAAgCC,UAAhC,EAA4CC,UAA5C,EAAwDC,UAAxD,CAAT;SADJ,CAGA,OAAO5M,GAAP,EAAY;iBACHT,WAAL,CAAiBT,KAAjB,CAAuBkB,GAAvB;;;aAGCT,WAAL,CAAiBK,IAAjB,CAAsBgH,MAAtB;KATJ;WAWOoI,mBAAP;CA9DuB,CA+DzBZ,oBAAkB7B,eA/DO,CAA3B;;;;;;AC1EA,IAAItH,kBAAe1G,cAAnB;AACA,IAAI6Q,cAAc7Q,aAAlB;AACA0G,gBAAarD,UAAb,CAAwBzD,SAAxB,CAAkC0Q,SAAlC,GAA8CO,YAAYP,SAA1D;;ACFA,IAAI5N,WAAS1C,UAAb;AACA,SAAS8Q,cAAT,GAA0B;;;WAGd,YAAY;iBACPC,UAAT,GAAsB;iBACbC,OAAL,GAAe,EAAf;;mBAEOpR,SAAX,CAAqBsB,GAArB,GAA2B,UAAUK,KAAV,EAAiB;gBACpC,CAAC,KAAK0P,GAAL,CAAS1P,KAAT,CAAL,EAAsB;qBACbyP,OAAL,CAAa9L,IAAb,CAAkB3D,KAAlB;;SAFR;mBAKW3B,SAAX,CAAqBqR,GAArB,GAA2B,UAAU1P,KAAV,EAAiB;mBACjC,KAAKyP,OAAL,CAAahL,OAAb,CAAqBzE,KAArB,MAAgC,CAAC,CAAxC;SADJ;eAGOkG,cAAP,CAAsBsJ,WAAWnR,SAAjC,EAA4C,MAA5C,EAAoD;iBAC3C,eAAY;uBACN,KAAKoR,OAAL,CAAajQ,MAApB;aAF4C;wBAIpC,IAJoC;0BAKlC;SALlB;mBAOWnB,SAAX,CAAqBsR,KAArB,GAA6B,YAAY;iBAChCF,OAAL,CAAajQ,MAAb,GAAsB,CAAtB;SADJ;eAGOgQ,UAAP;KAtBI,EAAR;;AAyBJjS,uBAAyBgS,cAAzB;AACAhS,UAAc4D,SAAO3D,IAAP,CAAYgQ,GAAZ,IAAmB+B,gBAAjC;;;;;;;AC9BA,IAAI1R,eAAaC,kBAAQA,eAAKD,SAAd,IAA4B,UAAUE,CAAV,EAAaC,CAAb,EAAgB;SACnD,IAAIC,CAAT,IAAcD,CAAd;YAAqBA,EAAEE,cAAF,CAAiBD,CAAjB,CAAJ,EAAyBF,EAAEE,CAAF,IAAOD,EAAEC,CAAF,CAAP;KAC1C,SAASE,EAAT,GAAc;aAAOC,WAAL,GAAmBL,CAAnB;;MACdM,SAAF,GAAcL,MAAM,IAAN,GAAaM,OAAOC,MAAP,CAAcP,CAAd,CAAb,IAAiCG,GAAGE,SAAH,GAAeL,EAAEK,SAAjB,EAA4B,IAAIF,EAAJ,EAA7D,CAAd;CAHJ;AAKA,IAAImQ,sBAAoB7P,mBAAxB;AACA,IAAI8P,wBAAsB9P,qBAA1B;AACA,IAAI8O,QAAQ9O,IAAZ;;;;;;;;;;;;;;;;;AAiBA,SAASmR,UAAT,CAAkBC,WAAlB,EAA+BC,OAA/B,EAAwC;WAC7B,KAAK5N,IAAL,CAAU,IAAI6N,gBAAJ,CAAqBF,WAArB,EAAkCC,OAAlC,CAAV,CAAP;;AAEJvS,iBAAmBqS,UAAnB;AACA,IAAIG,mBAAoB,YAAY;aACvBA,gBAAT,CAA0BF,WAA1B,EAAuCC,OAAvC,EAAgD;aACvCD,WAAL,GAAmBA,WAAnB;aACKC,OAAL,GAAeA,OAAf;;qBAEazR,SAAjB,CAA2Ba,IAA3B,GAAkC,UAAUa,UAAV,EAAsBqC,MAAtB,EAA8B;eACrDA,OAAOH,UAAP,CAAkB,IAAI+N,kBAAJ,CAAuBjQ,UAAvB,EAAmC,KAAK8P,WAAxC,EAAqD,KAAKC,OAA1D,CAAlB,CAAP;KADJ;WAGOC,gBAAP;CARoB,EAAxB;;;;;;AAeA,IAAIC,qBAAsB,UAAUlR,MAAV,EAAkB;iBAC9BkR,kBAAV,EAA8BlR,MAA9B;aACSkR,kBAAT,CAA4BvQ,WAA5B,EAAyCoQ,WAAzC,EAAsDC,OAAtD,EAA+D;eACpD5Q,IAAP,CAAY,IAAZ,EAAkBO,WAAlB;aACKoQ,WAAL,GAAmBA,WAAnB;aACKI,MAAL,GAAc,IAAI1C,MAAMC,GAAV,EAAd;YACIsC,OAAJ,EAAa;iBACJnQ,GAAL,CAAS4O,sBAAoBP,iBAApB,CAAsC,IAAtC,EAA4C8B,OAA5C,CAAT;;;uBAGWzR,SAAnB,CAA6BqO,UAA7B,GAA0C,UAAUC,UAAV,EAAsBC,UAAtB,EAAkCC,UAAlC,EAA8CC,UAA9C,EAA0DC,QAA1D,EAAoE;aACrGkD,MAAL,CAAYN,KAAZ;KADJ;uBAGmBtR,SAAnB,CAA6B2O,WAA7B,GAA2C,UAAUhO,KAAV,EAAiB+N,QAAjB,EAA2B;aAC7D5M,MAAL,CAAYnB,KAAZ;KADJ;uBAGmBX,SAAnB,CAA6B4B,KAA7B,GAAqC,UAAUD,KAAV,EAAiB;YAC9C,KAAK6P,WAAT,EAAsB;iBACbK,eAAL,CAAqBlQ,KAArB;SADJ,MAGK;iBACImQ,aAAL,CAAmBnQ,KAAnB,EAA0BA,KAA1B;;KALR;uBAQmB3B,SAAnB,CAA6B6R,eAA7B,GAA+C,UAAUlQ,KAAV,EAAiB;YACxDkK,GAAJ;YACIzK,cAAc,KAAKA,WAAvB;YACI;kBACM,KAAKoQ,WAAL,CAAiB7P,KAAjB,CAAN;SADJ,CAGA,OAAOE,GAAP,EAAY;wBACIlB,KAAZ,CAAkBkB,GAAlB;;;aAGCiQ,aAAL,CAAmBjG,GAAnB,EAAwBlK,KAAxB;KAVJ;uBAYmB3B,SAAnB,CAA6B8R,aAA7B,GAA6C,UAAUjG,GAAV,EAAelK,KAAf,EAAsB;YAC3DiQ,SAAS,KAAKA,MAAlB;YACI,CAACA,OAAOP,GAAP,CAAWxF,GAAX,CAAL,EAAsB;mBACXvK,GAAP,CAAWuK,GAAX;iBACKzK,WAAL,CAAiBK,IAAjB,CAAsBE,KAAtB;;KAJR;WAOOgQ,kBAAP;CA3CsB,CA4CxB1B,oBAAkB7B,eA5CM,CAA1B;AA6CAlP,2BAA6ByS,kBAA7B;;;;;;;ACxFA,IAAI7K,kBAAe1G,cAAnB;AACA,IAAI2R,aAAa3R,YAAjB;AACA0G,gBAAarD,UAAb,CAAwBzD,SAAxB,CAAkCuR,QAAlC,GAA6CQ,WAAWR,QAAxD;;ACcAS,eAAeC,MAAf,CAAsB,YAAtB;;;;sBACqB;UACZ;;;SAGD7H,aAAK8H,MAAL,CAAY,EAAEC,WAAW,IAAb,EAAZ,CAHC;mBAIS/H,aAAK8H,MAAL,CAAY,EAAEC,WAAW,IAAb,EAAZ;IAJhB;;;;mBAQY;;;;;QAEPC,IAAL,GAAY,IAAIzK,iBAAJ,CAAoB,MAAK0K,GAAzB,EACVtE,MADU,CACH;UAAOuE,OAAO,OAAOA,GAAP,KAAe,QAA7B;GADG,EAEVf,QAFU,CAEA,UAACc,GAAD;UAASA,MAAM,MAAK,aAAL,CAAf;GAFA,EAGV3B,SAHU,CAGA;UAAO,MAAK6B,QAAL,CAAcF,GAAd,CAAP;GAHA,EAIVtE,MAJU,CAIH;UAAO,CAAC,CAACyE,GAAT;GAJG,CAAZ;;;;;;2BAQQH,GApBV,EAoBc;;UAELI,OAAK,EAACpJ,KAAIgJ,GAAL,EAASK,OAAM,IAAf,EAAoBvI,aAAY,IAAhC,EAAqCL,cAAa,MAAlD,EAAL,EACL5B,GADK,CACD,UAAU8B,QAAV,EAAoB;WACjB2I,OAAOC,QAAP,CAAgB5I,SAASA,QAAzB,CAAP;IAFK,EAILyG,KAJK,CAIC,UAAC5O,GAAD,EAAO;YACLlB,KAAR,CAAckB,GAAd;WACO4B,aAAWpC,KAAX,EAAP;IANK,CAAP;;;;8BAUU;UACHsR,OAAO,KAAKE,UAAZ,EAAwBC,IAAxB,CAA6B,kBAA7B,EAAiDxI,GAAjD,CAAqD,CAArD,CAAP;;;;4BAGSkI,GApCX,EAoCe;OACTO,OAAO,IAAX;OACG,CAACP,GAAJ,EAAQ;;;OACFQ,IAAIL,MAAV;;OAGIM,OAAOD,EAAER,GAAF,EAAOM,IAAP,CAAY,KAAZ,CAAX;OACII,MAAMD,KAAK3I,GAAL,CAAS,CAAT,CAAV;;OAEI6I,eAAJ,CAAoB,SAApB;OACGJ,KAAKK,KAAL,IAAcL,KAAKM,MAAtB,EAA6B;;QAExBC,YAAJ,CAAiB,OAAjB,EAAyB,MAAzB;QACIA,YAAJ,CAAiB,QAAjB,EAA0B,MAA1B;;;OAGGC,SAASR,KAAKS,SAAL,EAAb;;OAEGD,MAAH,EAAU;WACFE,SAAP,GAAmB,EAAnB;WACOC,WAAP,CAAmBR,GAAnB;;;;;sCAImB;;;;;;OAIjB,CAACP,MAAJ,EAAW;UACJ,IAAItK,SAAJ,CAAc,oCAAd,CAAN;;;QAGIsL,eAAL,GAAuB,KAAKvB,IAAL,CACrB1O,SADqB,CAErB,UAAC2O,GAAD;WAAO,OAAKuB,SAAL,CAAevB,GAAf,CAAP;IAFqB,EAGrB,UAACxQ,GAAD;WAAOgS,QAAQlT,KAAR,CAAckB,GAAd,CAAP;IAHqB,CAAvB;;;;2CAMyB0E,IA1E3B,EA0EiCuN,QA1EjC,EA0E2CC,QA1E3C,EA0EqD;6HACpBxN,IAA/B,EAAqCuN,QAArC,EAA+CC,QAA/C;OACGxN,SAAS,KAAZ,EAAkB;SACZ6L,IAAL,CAAU3Q,IAAV,CAAesS,QAAf;;;;;yCAGsB;;;OAGpB,KAAKJ,eAAR,EAAwB;SAClBA,eAAL,CAAqB3R,WAArB;;;;;mCAGgB;;;;OAIb+Q,OAAO,IAAX;;OAEMiB,iVAAN;;QAkBK5B,IAAL,CAAU3Q,IAAV,CAAesR,KAAKV,GAApB;;UAEO,CACN4B;;;kBAAsBlB,KAAK,aAAL;IADhB,EAENkB,sBAAQ,MAAK,OAAb,EAAqB,WAAU,iBAA/B,GAFM,CAAP;;;;EAjHgDC,iBAAlD;;;;"}